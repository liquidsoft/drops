{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/d/auto-bind.js","node_modules/d/index.js","node_modules/es5-ext/array/#/clear.js","node_modules/es5-ext/function/is-arguments.js","node_modules/es5-ext/object/_iterate.js","node_modules/es5-ext/object/assign/index.js","node_modules/es5-ext/object/assign/is-implemented.js","node_modules/es5-ext/object/assign/shim.js","node_modules/es5-ext/object/copy.js","node_modules/es5-ext/object/create.js","node_modules/es5-ext/object/for-each.js","node_modules/es5-ext/object/is-callable.js","node_modules/es5-ext/object/is-object.js","node_modules/es5-ext/object/keys/index.js","node_modules/es5-ext/object/keys/is-implemented.js","node_modules/es5-ext/object/keys/shim.js","node_modules/es5-ext/object/map.js","node_modules/es5-ext/object/normalize-options.js","node_modules/es5-ext/object/set-prototype-of/index.js","node_modules/es5-ext/object/set-prototype-of/is-implemented.js","node_modules/es5-ext/object/set-prototype-of/shim.js","node_modules/es5-ext/object/valid-callable.js","node_modules/es5-ext/object/valid-object.js","node_modules/es5-ext/object/valid-value.js","node_modules/es5-ext/string/#/contains/index.js","node_modules/es5-ext/string/#/contains/is-implemented.js","node_modules/es5-ext/string/#/contains/shim.js","node_modules/es5-ext/string/is-string.js","node_modules/es5-ext/string/random-uniq.js","node_modules/es6-iterator/array.js","node_modules/es6-iterator/for-of.js","node_modules/es6-iterator/get.js","node_modules/es6-iterator/index.js","node_modules/es6-iterator/is-iterable.js","node_modules/es6-iterator/string.js","node_modules/es6-iterator/valid-iterable.js","node_modules/es6-symbol/index.js","node_modules/es6-symbol/is-implemented.js","node_modules/es6-symbol/is-symbol.js","node_modules/es6-symbol/polyfill.js","node_modules/es6-symbol/validate-symbol.js","node_modules/es6-weak-map/index.js","node_modules/es6-weak-map/is-implemented.js","node_modules/es6-weak-map/is-native-implemented.js","node_modules/es6-weak-map/polyfill.js","node_modules/object-assign/index.js","src/js/Field.js","src/js/Select.js","src/js/src/js/index.js","src/js/manager.js","src/js/symbols.js","src/js/utils.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;qjBC1FA;;;;;;;;;AASA;;;;AACA;;IAAY,O;;AACZ;;;;;;;;IAEqB,K;;AAEjB;;;;;;AAOA,mBAAY,KAAZ,EAAiC;AAAA,YAAd,OAAc,uEAAJ,EAAI;;AAAA;;AAC7B,aAAK,QAAL,GAAgB,EAAhB;AACA,aAAK,QAAL,CAAc,KAAd,GAAsB,KAAtB;;AAEA;AACA,aAAK,QAAQ,iBAAb,EAAgC,OAAhC;AACA,aAAK,QAAQ,cAAb;AACA,aAAK,QAAQ,eAAb;AACA,aAAK,QAAQ,gBAAb;AACH;;;aAEA,QAAQ,iB;8BAAmB,O,EAAS;AACjC,iBAAK,OAAL,GAAe,4BAAO;AAClB,6BAAa,KAAK,QAAL,CAAc,KAAd,CAAoB,WAApB,IAAmC,EAD9B;;AAGlB,4BAHkB,wBAGL,KAHK,EAGE,KAHF,EAGS;AACvB,2BAAO,KAAP;AACH,iBALiB;AAOlB,8BAPkB,0BAOH,KAPG,EAOI,WAPJ,EAOiB;AAC/B,2BAAO,WAAP;AACH;AATiB,aAAP,EAWZ,OAXY,CAAf;AAYH;;aA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","file":"drops.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nvar copy             = require('es5-ext/object/copy')\n  , normalizeOptions = require('es5-ext/object/normalize-options')\n  , ensureCallable   = require('es5-ext/object/valid-callable')\n  , map              = require('es5-ext/object/map')\n  , callable         = require('es5-ext/object/valid-callable')\n  , validValue       = require('es5-ext/object/valid-value')\n\n  , bind = Function.prototype.bind, defineProperty = Object.defineProperty\n  , hasOwnProperty = Object.prototype.hasOwnProperty\n  , define;\n\ndefine = function (name, desc, options) {\n\tvar value = validValue(desc) && callable(desc.value), dgs;\n\tdgs = copy(desc);\n\tdelete dgs.writable;\n\tdelete dgs.value;\n\tdgs.get = function () {\n\t\tif (!options.overwriteDefinition && hasOwnProperty.call(this, name)) return value;\n\t\tdesc.value = bind.call(value, options.resolveContext ? options.resolveContext(this) : this);\n\t\tdefineProperty(this, name, desc);\n\t\treturn this[name];\n\t};\n\treturn dgs;\n};\n\nmodule.exports = function (props/*, options*/) {\n\tvar options = normalizeOptions(arguments[1]);\n\tif (options.resolveContext != null) ensureCallable(options.resolveContext);\n\treturn map(props, function (desc, name) { return define(name, desc, options); });\n};\n","'use strict';\n\nvar assign        = require('es5-ext/object/assign')\n  , normalizeOpts = require('es5-ext/object/normalize-options')\n  , isCallable    = require('es5-ext/object/is-callable')\n  , contains      = require('es5-ext/string/#/contains')\n\n  , d;\n\nd = module.exports = function (dscr, value/*, options*/) {\n\tvar c, e, w, options, desc;\n\tif ((arguments.length < 2) || (typeof dscr !== 'string')) {\n\t\toptions = value;\n\t\tvalue = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[2];\n\t}\n\tif (dscr == null) {\n\t\tc = w = true;\n\t\te = false;\n\t} else {\n\t\tc = contains.call(dscr, 'c');\n\t\te = contains.call(dscr, 'e');\n\t\tw = contains.call(dscr, 'w');\n\t}\n\n\tdesc = { value: value, configurable: c, enumerable: e, writable: w };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n\nd.gs = function (dscr, get, set/*, options*/) {\n\tvar c, e, options, desc;\n\tif (typeof dscr !== 'string') {\n\t\toptions = set;\n\t\tset = get;\n\t\tget = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[3];\n\t}\n\tif (get == null) {\n\t\tget = undefined;\n\t} else if (!isCallable(get)) {\n\t\toptions = get;\n\t\tget = set = undefined;\n\t} else if (set == null) {\n\t\tset = undefined;\n\t} else if (!isCallable(set)) {\n\t\toptions = set;\n\t\tset = undefined;\n\t}\n\tif (dscr == null) {\n\t\tc = true;\n\t\te = false;\n\t} else {\n\t\tc = contains.call(dscr, 'c');\n\t\te = contains.call(dscr, 'e');\n\t}\n\n\tdesc = { get: get, set: set, configurable: c, enumerable: e };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n","// Inspired by Google Closure:\n// http://closure-library.googlecode.com/svn/docs/\n// closure_goog_array_array.js.html#goog.array.clear\n\n'use strict';\n\nvar value = require('../../object/valid-value');\n\nmodule.exports = function () {\n\tvalue(this).length = 0;\n\treturn this;\n};\n","'use strict';\n\nvar toString = Object.prototype.toString\n\n  , id = toString.call((function () { return arguments; }()));\n\nmodule.exports = function (x) { return (toString.call(x) === id); };\n","// Internal method, used by iteration functions.\n// Calls a function for each key-value pair found in object\n// Optionally takes compareFn to iterate object in specific order\n\n'use strict';\n\nvar callable = require('./valid-callable')\n  , value    = require('./valid-value')\n\n  , bind = Function.prototype.bind, call = Function.prototype.call, keys = Object.keys\n  , propertyIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nmodule.exports = function (method, defVal) {\n\treturn function (obj, cb/*, thisArg, compareFn*/) {\n\t\tvar list, thisArg = arguments[2], compareFn = arguments[3];\n\t\tobj = Object(value(obj));\n\t\tcallable(cb);\n\n\t\tlist = keys(obj);\n\t\tif (compareFn) {\n\t\t\tlist.sort((typeof compareFn === 'function') ? bind.call(compareFn, obj) : undefined);\n\t\t}\n\t\tif (typeof method !== 'function') method = list[method];\n\t\treturn call.call(method, list, function (key, index) {\n\t\t\tif (!propertyIsEnumerable.call(obj, key)) return defVal;\n\t\t\treturn call.call(cb, thisArg, obj[key], key, obj, index);\n\t\t});\n\t};\n};\n","'use strict';\n\nmodule.exports = require('./is-implemented')()\n\t? Object.assign\n\t: require('./shim');\n","'use strict';\n\nmodule.exports = function () {\n\tvar assign = Object.assign, obj;\n\tif (typeof assign !== 'function') return false;\n\tobj = { foo: 'raz' };\n\tassign(obj, { bar: 'dwa' }, { trzy: 'trzy' });\n\treturn (obj.foo + obj.bar + obj.trzy) === 'razdwatrzy';\n};\n","'use strict';\n\nvar keys  = require('../keys')\n  , value = require('../valid-value')\n\n  , max = Math.max;\n\nmodule.exports = function (dest, src/*, …srcn*/) {\n\tvar error, i, l = max(arguments.length, 2), assign;\n\tdest = Object(value(dest));\n\tassign = function (key) {\n\t\ttry { dest[key] = src[key]; } catch (e) {\n\t\t\tif (!error) error = e;\n\t\t}\n\t};\n\tfor (i = 1; i < l; ++i) {\n\t\tsrc = arguments[i];\n\t\tkeys(src).forEach(assign);\n\t}\n\tif (error !== undefined) throw error;\n\treturn dest;\n};\n","'use strict';\n\nvar assign = require('./assign')\n  , value  = require('./valid-value');\n\nmodule.exports = function (obj) {\n\tvar copy = Object(value(obj));\n\tif (copy !== obj) return copy;\n\treturn assign({}, obj);\n};\n","// Workaround for http://code.google.com/p/v8/issues/detail?id=2804\n\n'use strict';\n\nvar create = Object.create, shim;\n\nif (!require('./set-prototype-of/is-implemented')()) {\n\tshim = require('./set-prototype-of/shim');\n}\n\nmodule.exports = (function () {\n\tvar nullObject, props, desc;\n\tif (!shim) return create;\n\tif (shim.level !== 1) return create;\n\n\tnullObject = {};\n\tprops = {};\n\tdesc = { configurable: false, enumerable: false, writable: true,\n\t\tvalue: undefined };\n\tObject.getOwnPropertyNames(Object.prototype).forEach(function (name) {\n\t\tif (name === '__proto__') {\n\t\t\tprops[name] = { configurable: true, enumerable: false, writable: true,\n\t\t\t\tvalue: undefined };\n\t\t\treturn;\n\t\t}\n\t\tprops[name] = desc;\n\t});\n\tObject.defineProperties(nullObject, props);\n\n\tObject.defineProperty(shim, 'nullPolyfill', { configurable: false,\n\t\tenumerable: false, writable: false, value: nullObject });\n\n\treturn function (prototype, props) {\n\t\treturn create((prototype === null) ? nullObject : prototype, props);\n\t};\n}());\n","'use strict';\n\nmodule.exports = require('./_iterate')('forEach');\n","// Deprecated\n\n'use strict';\n\nmodule.exports = function (obj) { return typeof obj === 'function'; };\n","'use strict';\n\nvar map = { 'function': true, object: true };\n\nmodule.exports = function (x) {\n\treturn ((x != null) && map[typeof x]) || false;\n};\n","'use strict';\n\nmodule.exports = require('./is-implemented')()\n\t? Object.keys\n\t: require('./shim');\n","'use strict';\n\nmodule.exports = function () {\n\ttry {\n\t\tObject.keys('primitive');\n\t\treturn true;\n\t} catch (e) { return false; }\n};\n","'use strict';\n\nvar keys = Object.keys;\n\nmodule.exports = function (object) {\n\treturn keys(object == null ? object : Object(object));\n};\n","'use strict';\n\nvar callable = require('./valid-callable')\n  , forEach  = require('./for-each')\n\n  , call = Function.prototype.call;\n\nmodule.exports = function (obj, cb/*, thisArg*/) {\n\tvar o = {}, thisArg = arguments[2];\n\tcallable(cb);\n\tforEach(obj, function (value, key, obj, index) {\n\t\to[key] = call.call(cb, thisArg, value, key, obj, index);\n\t});\n\treturn o;\n};\n","'use strict';\n\nvar forEach = Array.prototype.forEach, create = Object.create;\n\nvar process = function (src, obj) {\n\tvar key;\n\tfor (key in src) obj[key] = src[key];\n};\n\nmodule.exports = function (options/*, …options*/) {\n\tvar result = create(null);\n\tforEach.call(arguments, function (options) {\n\t\tif (options == null) return;\n\t\tprocess(Object(options), result);\n\t});\n\treturn result;\n};\n","'use strict';\n\nmodule.exports = require('./is-implemented')()\n\t? Object.setPrototypeOf\n\t: require('./shim');\n","'use strict';\n\nvar create = Object.create, getPrototypeOf = Object.getPrototypeOf\n  , x = {};\n\nmodule.exports = function (/*customCreate*/) {\n\tvar setPrototypeOf = Object.setPrototypeOf\n\t  , customCreate = arguments[0] || create;\n\tif (typeof setPrototypeOf !== 'function') return false;\n\treturn getPrototypeOf(setPrototypeOf(customCreate(null), x)) === x;\n};\n","// Big thanks to @WebReflection for sorting this out\n// https://gist.github.com/WebReflection/5593554\n\n'use strict';\n\nvar isObject      = require('../is-object')\n  , value         = require('../valid-value')\n\n  , isPrototypeOf = Object.prototype.isPrototypeOf\n  , defineProperty = Object.defineProperty\n  , nullDesc = { configurable: true, enumerable: false, writable: true,\n\t\tvalue: undefined }\n  , validate;\n\nvalidate = function (obj, prototype) {\n\tvalue(obj);\n\tif ((prototype === null) || isObject(prototype)) return obj;\n\tthrow new TypeError('Prototype must be null or an object');\n};\n\nmodule.exports = (function (status) {\n\tvar fn, set;\n\tif (!status) return null;\n\tif (status.level === 2) {\n\t\tif (status.set) {\n\t\t\tset = status.set;\n\t\t\tfn = function (obj, prototype) {\n\t\t\t\tset.call(validate(obj, prototype), prototype);\n\t\t\t\treturn obj;\n\t\t\t};\n\t\t} else {\n\t\t\tfn = function (obj, prototype) {\n\t\t\t\tvalidate(obj, prototype).__proto__ = prototype;\n\t\t\t\treturn obj;\n\t\t\t};\n\t\t}\n\t} else {\n\t\tfn = function self(obj, prototype) {\n\t\t\tvar isNullBase;\n\t\t\tvalidate(obj, prototype);\n\t\t\tisNullBase = isPrototypeOf.call(self.nullPolyfill, obj);\n\t\t\tif (isNullBase) delete self.nullPolyfill.__proto__;\n\t\t\tif (prototype === null) prototype = self.nullPolyfill;\n\t\t\tobj.__proto__ = prototype;\n\t\t\tif (isNullBase) defineProperty(self.nullPolyfill, '__proto__', nullDesc);\n\t\t\treturn obj;\n\t\t};\n\t}\n\treturn Object.defineProperty(fn, 'level', { configurable: false,\n\t\tenumerable: false, writable: false, value: status.level });\n}((function () {\n\tvar x = Object.create(null), y = {}, set\n\t  , desc = Object.getOwnPropertyDescriptor(Object.prototype, '__proto__');\n\n\tif (desc) {\n\t\ttry {\n\t\t\tset = desc.set; // Opera crashes at this point\n\t\t\tset.call(x, y);\n\t\t} catch (ignore) { }\n\t\tif (Object.getPrototypeOf(x) === y) return { set: set, level: 2 };\n\t}\n\n\tx.__proto__ = y;\n\tif (Object.getPrototypeOf(x) === y) return { level: 2 };\n\n\tx = {};\n\tx.__proto__ = y;\n\tif (Object.getPrototypeOf(x) === y) return { level: 1 };\n\n\treturn false;\n}())));\n\nrequire('../create');\n","'use strict';\n\nmodule.exports = function (fn) {\n\tif (typeof fn !== 'function') throw new TypeError(fn + \" is not a function\");\n\treturn fn;\n};\n","'use strict';\n\nvar isObject = require('./is-object');\n\nmodule.exports = function (value) {\n\tif (!isObject(value)) throw new TypeError(value + \" is not an Object\");\n\treturn value;\n};\n","'use strict';\n\nmodule.exports = function (value) {\n\tif (value == null) throw new TypeError(\"Cannot use null or undefined\");\n\treturn value;\n};\n","'use strict';\n\nmodule.exports = require('./is-implemented')()\n\t? String.prototype.contains\n\t: require('./shim');\n","'use strict';\n\nvar str = 'razdwatrzy';\n\nmodule.exports = function () {\n\tif (typeof str.contains !== 'function') return false;\n\treturn ((str.contains('dwa') === true) && (str.contains('foo') === false));\n};\n","'use strict';\n\nvar indexOf = String.prototype.indexOf;\n\nmodule.exports = function (searchString/*, position*/) {\n\treturn indexOf.call(this, searchString, arguments[1]) > -1;\n};\n","'use strict';\n\nvar toString = Object.prototype.toString\n\n  , id = toString.call('');\n\nmodule.exports = function (x) {\n\treturn (typeof x === 'string') || (x && (typeof x === 'object') &&\n\t\t((x instanceof String) || (toString.call(x) === id))) || false;\n};\n","'use strict';\n\nvar generated = Object.create(null)\n\n  , random = Math.random;\n\nmodule.exports = function () {\n\tvar str;\n\tdo { str = random().toString(36).slice(2); } while (generated[str]);\n\treturn str;\n};\n","'use strict';\n\nvar setPrototypeOf = require('es5-ext/object/set-prototype-of')\n  , contains       = require('es5-ext/string/#/contains')\n  , d              = require('d')\n  , Iterator       = require('./')\n\n  , defineProperty = Object.defineProperty\n  , ArrayIterator;\n\nArrayIterator = module.exports = function (arr, kind) {\n\tif (!(this instanceof ArrayIterator)) return new ArrayIterator(arr, kind);\n\tIterator.call(this, arr);\n\tif (!kind) kind = 'value';\n\telse if (contains.call(kind, 'key+value')) kind = 'key+value';\n\telse if (contains.call(kind, 'key')) kind = 'key';\n\telse kind = 'value';\n\tdefineProperty(this, '__kind__', d('', kind));\n};\nif (setPrototypeOf) setPrototypeOf(ArrayIterator, Iterator);\n\nArrayIterator.prototype = Object.create(Iterator.prototype, {\n\tconstructor: d(ArrayIterator),\n\t_resolve: d(function (i) {\n\t\tif (this.__kind__ === 'value') return this.__list__[i];\n\t\tif (this.__kind__ === 'key+value') return [i, this.__list__[i]];\n\t\treturn i;\n\t}),\n\ttoString: d(function () { return '[object Array Iterator]'; })\n});\n","'use strict';\n\nvar isArguments = require('es5-ext/function/is-arguments')\n  , callable    = require('es5-ext/object/valid-callable')\n  , isString    = require('es5-ext/string/is-string')\n  , get         = require('./get')\n\n  , isArray = Array.isArray, call = Function.prototype.call\n  , some = Array.prototype.some;\n\nmodule.exports = function (iterable, cb/*, thisArg*/) {\n\tvar mode, thisArg = arguments[2], result, doBreak, broken, i, l, char, code;\n\tif (isArray(iterable) || isArguments(iterable)) mode = 'array';\n\telse if (isString(iterable)) mode = 'string';\n\telse iterable = get(iterable);\n\n\tcallable(cb);\n\tdoBreak = function () { broken = true; };\n\tif (mode === 'array') {\n\t\tsome.call(iterable, function (value) {\n\t\t\tcall.call(cb, thisArg, value, doBreak);\n\t\t\tif (broken) return true;\n\t\t});\n\t\treturn;\n\t}\n\tif (mode === 'string') {\n\t\tl = iterable.length;\n\t\tfor (i = 0; i < l; ++i) {\n\t\t\tchar = iterable[i];\n\t\t\tif ((i + 1) < l) {\n\t\t\t\tcode = char.charCodeAt(0);\n\t\t\t\tif ((code >= 0xD800) && (code <= 0xDBFF)) char += iterable[++i];\n\t\t\t}\n\t\t\tcall.call(cb, thisArg, char, doBreak);\n\t\t\tif (broken) break;\n\t\t}\n\t\treturn;\n\t}\n\tresult = iterable.next();\n\n\twhile (!result.done) {\n\t\tcall.call(cb, thisArg, result.value, doBreak);\n\t\tif (broken) return;\n\t\tresult = iterable.next();\n\t}\n};\n","'use strict';\n\nvar isArguments    = require('es5-ext/function/is-arguments')\n  , isString       = require('es5-ext/string/is-string')\n  , ArrayIterator  = require('./array')\n  , StringIterator = require('./string')\n  , iterable       = require('./valid-iterable')\n  , iteratorSymbol = require('es6-symbol').iterator;\n\nmodule.exports = function (obj) {\n\tif (typeof iterable(obj)[iteratorSymbol] === 'function') return obj[iteratorSymbol]();\n\tif (isArguments(obj)) return new ArrayIterator(obj);\n\tif (isString(obj)) return new StringIterator(obj);\n\treturn new ArrayIterator(obj);\n};\n","'use strict';\n\nvar clear    = require('es5-ext/array/#/clear')\n  , assign   = require('es5-ext/object/assign')\n  , callable = require('es5-ext/object/valid-callable')\n  , value    = require('es5-ext/object/valid-value')\n  , d        = require('d')\n  , autoBind = require('d/auto-bind')\n  , Symbol   = require('es6-symbol')\n\n  , defineProperty = Object.defineProperty\n  , defineProperties = Object.defineProperties\n  , Iterator;\n\nmodule.exports = Iterator = function (list, context) {\n\tif (!(this instanceof Iterator)) return new Iterator(list, context);\n\tdefineProperties(this, {\n\t\t__list__: d('w', value(list)),\n\t\t__context__: d('w', context),\n\t\t__nextIndex__: d('w', 0)\n\t});\n\tif (!context) return;\n\tcallable(context.on);\n\tcontext.on('_add', this._onAdd);\n\tcontext.on('_delete', this._onDelete);\n\tcontext.on('_clear', this._onClear);\n};\n\ndefineProperties(Iterator.prototype, assign({\n\tconstructor: d(Iterator),\n\t_next: d(function () {\n\t\tvar i;\n\t\tif (!this.__list__) return;\n\t\tif (this.__redo__) {\n\t\t\ti = this.__redo__.shift();\n\t\t\tif (i !== undefined) return i;\n\t\t}\n\t\tif (this.__nextIndex__ < this.__list__.length) return this.__nextIndex__++;\n\t\tthis._unBind();\n\t}),\n\tnext: d(function () { return this._createResult(this._next()); }),\n\t_createResult: d(function (i) {\n\t\tif (i === undefined) return { done: true, value: undefined };\n\t\treturn { done: false, value: this._resolve(i) };\n\t}),\n\t_resolve: d(function (i) { return this.__list__[i]; }),\n\t_unBind: d(function () {\n\t\tthis.__list__ = null;\n\t\tdelete this.__redo__;\n\t\tif (!this.__context__) return;\n\t\tthis.__context__.off('_add', this._onAdd);\n\t\tthis.__context__.off('_delete', this._onDelete);\n\t\tthis.__context__.off('_clear', this._onClear);\n\t\tthis.__context__ = null;\n\t}),\n\ttoString: d(function () { return '[object Iterator]'; })\n}, autoBind({\n\t_onAdd: d(function (index) {\n\t\tif (index >= this.__nextIndex__) return;\n\t\t++this.__nextIndex__;\n\t\tif (!this.__redo__) {\n\t\t\tdefineProperty(this, '__redo__', d('c', [index]));\n\t\t\treturn;\n\t\t}\n\t\tthis.__redo__.forEach(function (redo, i) {\n\t\t\tif (redo >= index) this.__redo__[i] = ++redo;\n\t\t}, this);\n\t\tthis.__redo__.push(index);\n\t}),\n\t_onDelete: d(function (index) {\n\t\tvar i;\n\t\tif (index >= this.__nextIndex__) return;\n\t\t--this.__nextIndex__;\n\t\tif (!this.__redo__) return;\n\t\ti = this.__redo__.indexOf(index);\n\t\tif (i !== -1) this.__redo__.splice(i, 1);\n\t\tthis.__redo__.forEach(function (redo, i) {\n\t\t\tif (redo > index) this.__redo__[i] = --redo;\n\t\t}, this);\n\t}),\n\t_onClear: d(function () {\n\t\tif (this.__redo__) clear.call(this.__redo__);\n\t\tthis.__nextIndex__ = 0;\n\t})\n})));\n\ndefineProperty(Iterator.prototype, Symbol.iterator, d(function () {\n\treturn this;\n}));\ndefineProperty(Iterator.prototype, Symbol.toStringTag, d('', 'Iterator'));\n","'use strict';\n\nvar isArguments    = require('es5-ext/function/is-arguments')\n  , isString       = require('es5-ext/string/is-string')\n  , iteratorSymbol = require('es6-symbol').iterator\n\n  , isArray = Array.isArray;\n\nmodule.exports = function (value) {\n\tif (value == null) return false;\n\tif (isArray(value)) return true;\n\tif (isString(value)) return true;\n\tif (isArguments(value)) return true;\n\treturn (typeof value[iteratorSymbol] === 'function');\n};\n","// Thanks @mathiasbynens\n// http://mathiasbynens.be/notes/javascript-unicode#iterating-over-symbols\n\n'use strict';\n\nvar setPrototypeOf = require('es5-ext/object/set-prototype-of')\n  , d              = require('d')\n  , Iterator       = require('./')\n\n  , defineProperty = Object.defineProperty\n  , StringIterator;\n\nStringIterator = module.exports = function (str) {\n\tif (!(this instanceof StringIterator)) return new StringIterator(str);\n\tstr = String(str);\n\tIterator.call(this, str);\n\tdefineProperty(this, '__length__', d('', str.length));\n\n};\nif (setPrototypeOf) setPrototypeOf(StringIterator, Iterator);\n\nStringIterator.prototype = Object.create(Iterator.prototype, {\n\tconstructor: d(StringIterator),\n\t_next: d(function () {\n\t\tif (!this.__list__) return;\n\t\tif (this.__nextIndex__ < this.__length__) return this.__nextIndex__++;\n\t\tthis._unBind();\n\t}),\n\t_resolve: d(function (i) {\n\t\tvar char = this.__list__[i], code;\n\t\tif (this.__nextIndex__ === this.__length__) return char;\n\t\tcode = char.charCodeAt(0);\n\t\tif ((code >= 0xD800) && (code <= 0xDBFF)) return char + this.__list__[this.__nextIndex__++];\n\t\treturn char;\n\t}),\n\ttoString: d(function () { return '[object String Iterator]'; })\n});\n","'use strict';\n\nvar isIterable = require('./is-iterable');\n\nmodule.exports = function (value) {\n\tif (!isIterable(value)) throw new TypeError(value + \" is not iterable\");\n\treturn value;\n};\n","'use strict';\n\nmodule.exports = require('./is-implemented')() ? Symbol : require('./polyfill');\n","'use strict';\n\nvar validTypes = { object: true, symbol: true };\n\nmodule.exports = function () {\n\tvar symbol;\n\tif (typeof Symbol !== 'function') return false;\n\tsymbol = Symbol('test symbol');\n\ttry { String(symbol); } catch (e) { return false; }\n\n\t// Return 'true' also for polyfills\n\tif (!validTypes[typeof Symbol.iterator]) return false;\n\tif (!validTypes[typeof Symbol.toPrimitive]) return false;\n\tif (!validTypes[typeof Symbol.toStringTag]) return false;\n\n\treturn true;\n};\n","'use strict';\n\nmodule.exports = function (x) {\n\tif (!x) return false;\n\tif (typeof x === 'symbol') return true;\n\tif (!x.constructor) return false;\n\tif (x.constructor.name !== 'Symbol') return false;\n\treturn (x[x.constructor.toStringTag] === 'Symbol');\n};\n","// ES2015 Symbol polyfill for environments that do not (or partially) support it\n\n'use strict';\n\nvar d              = require('d')\n  , validateSymbol = require('./validate-symbol')\n\n  , create = Object.create, defineProperties = Object.defineProperties\n  , defineProperty = Object.defineProperty, objPrototype = Object.prototype\n  , NativeSymbol, SymbolPolyfill, HiddenSymbol, globalSymbols = create(null)\n  , isNativeSafe;\n\nif (typeof Symbol === 'function') {\n\tNativeSymbol = Symbol;\n\ttry {\n\t\tString(NativeSymbol());\n\t\tisNativeSafe = true;\n\t} catch (ignore) {}\n}\n\nvar generateName = (function () {\n\tvar created = create(null);\n\treturn function (desc) {\n\t\tvar postfix = 0, name, ie11BugWorkaround;\n\t\twhile (created[desc + (postfix || '')]) ++postfix;\n\t\tdesc += (postfix || '');\n\t\tcreated[desc] = true;\n\t\tname = '@@' + desc;\n\t\tdefineProperty(objPrototype, name, d.gs(null, function (value) {\n\t\t\t// For IE11 issue see:\n\t\t\t// https://connect.microsoft.com/IE/feedbackdetail/view/1928508/\n\t\t\t//    ie11-broken-getters-on-dom-objects\n\t\t\t// https://github.com/medikoo/es6-symbol/issues/12\n\t\t\tif (ie11BugWorkaround) return;\n\t\t\tie11BugWorkaround = true;\n\t\t\tdefineProperty(this, name, d(value));\n\t\t\tie11BugWorkaround = false;\n\t\t}));\n\t\treturn name;\n\t};\n}());\n\n// Internal constructor (not one exposed) for creating Symbol instances.\n// This one is used to ensure that `someSymbol instanceof Symbol` always return false\nHiddenSymbol = function Symbol(description) {\n\tif (this instanceof HiddenSymbol) throw new TypeError('Symbol is not a constructor');\n\treturn SymbolPolyfill(description);\n};\n\n// Exposed `Symbol` constructor\n// (returns instances of HiddenSymbol)\nmodule.exports = SymbolPolyfill = function Symbol(description) {\n\tvar symbol;\n\tif (this instanceof Symbol) throw new TypeError('Symbol is not a constructor');\n\tif (isNativeSafe) return NativeSymbol(description);\n\tsymbol = create(HiddenSymbol.prototype);\n\tdescription = (description === undefined ? '' : String(description));\n\treturn defineProperties(symbol, {\n\t\t__description__: d('', description),\n\t\t__name__: d('', generateName(description))\n\t});\n};\ndefineProperties(SymbolPolyfill, {\n\tfor: d(function (key) {\n\t\tif (globalSymbols[key]) return globalSymbols[key];\n\t\treturn (globalSymbols[key] = SymbolPolyfill(String(key)));\n\t}),\n\tkeyFor: d(function (s) {\n\t\tvar key;\n\t\tvalidateSymbol(s);\n\t\tfor (key in globalSymbols) if (globalSymbols[key] === s) return key;\n\t}),\n\n\t// To ensure proper interoperability with other native functions (e.g. Array.from)\n\t// fallback to eventual native implementation of given symbol\n\thasInstance: d('', (NativeSymbol && NativeSymbol.hasInstance) || SymbolPolyfill('hasInstance')),\n\tisConcatSpreadable: d('', (NativeSymbol && NativeSymbol.isConcatSpreadable) ||\n\t\tSymbolPolyfill('isConcatSpreadable')),\n\titerator: d('', (NativeSymbol && NativeSymbol.iterator) || SymbolPolyfill('iterator')),\n\tmatch: d('', (NativeSymbol && NativeSymbol.match) || SymbolPolyfill('match')),\n\treplace: d('', (NativeSymbol && NativeSymbol.replace) || SymbolPolyfill('replace')),\n\tsearch: d('', (NativeSymbol && NativeSymbol.search) || SymbolPolyfill('search')),\n\tspecies: d('', (NativeSymbol && NativeSymbol.species) || SymbolPolyfill('species')),\n\tsplit: d('', (NativeSymbol && NativeSymbol.split) || SymbolPolyfill('split')),\n\ttoPrimitive: d('', (NativeSymbol && NativeSymbol.toPrimitive) || SymbolPolyfill('toPrimitive')),\n\ttoStringTag: d('', (NativeSymbol && NativeSymbol.toStringTag) || SymbolPolyfill('toStringTag')),\n\tunscopables: d('', (NativeSymbol && NativeSymbol.unscopables) || SymbolPolyfill('unscopables'))\n});\n\n// Internal tweaks for real symbol producer\ndefineProperties(HiddenSymbol.prototype, {\n\tconstructor: d(SymbolPolyfill),\n\ttoString: d('', function () { return this.__name__; })\n});\n\n// Proper implementation of methods exposed on Symbol.prototype\n// They won't be accessible on produced symbol instances as they derive from HiddenSymbol.prototype\ndefineProperties(SymbolPolyfill.prototype, {\n\ttoString: d(function () { return 'Symbol (' + validateSymbol(this).__description__ + ')'; }),\n\tvalueOf: d(function () { return validateSymbol(this); })\n});\ndefineProperty(SymbolPolyfill.prototype, SymbolPolyfill.toPrimitive, d('', function () {\n\tvar symbol = validateSymbol(this);\n\tif (typeof symbol === 'symbol') return symbol;\n\treturn symbol.toString();\n}));\ndefineProperty(SymbolPolyfill.prototype, SymbolPolyfill.toStringTag, d('c', 'Symbol'));\n\n// Proper implementaton of toPrimitive and toStringTag for returned symbol instances\ndefineProperty(HiddenSymbol.prototype, SymbolPolyfill.toStringTag,\n\td('c', SymbolPolyfill.prototype[SymbolPolyfill.toStringTag]));\n\n// Note: It's important to define `toPrimitive` as last one, as some implementations\n// implement `toPrimitive` natively without implementing `toStringTag` (or other specified symbols)\n// And that may invoke error in definition flow:\n// See: https://github.com/medikoo/es6-symbol/issues/13#issuecomment-164146149\ndefineProperty(HiddenSymbol.prototype, SymbolPolyfill.toPrimitive,\n\td('c', SymbolPolyfill.prototype[SymbolPolyfill.toPrimitive]));\n","'use strict';\n\nvar isSymbol = require('./is-symbol');\n\nmodule.exports = function (value) {\n\tif (!isSymbol(value)) throw new TypeError(value + \" is not a symbol\");\n\treturn value;\n};\n","'use strict';\n\nmodule.exports = require('./is-implemented')() ? WeakMap : require('./polyfill');\n","'use strict';\n\nmodule.exports = function () {\n\tvar weakMap, x;\n\tif (typeof WeakMap !== 'function') return false;\n\ttry {\n\t\t// WebKit doesn't support arguments and crashes\n\t\tweakMap = new WeakMap([[x = {}, 'one'], [{}, 'two'], [{}, 'three']]);\n\t} catch (e) {\n\t\treturn false;\n\t}\n\tif (String(weakMap) !== '[object WeakMap]') return false;\n\tif (typeof weakMap.set !== 'function') return false;\n\tif (weakMap.set({}, 1) !== weakMap) return false;\n\tif (typeof weakMap.delete !== 'function') return false;\n\tif (typeof weakMap.has !== 'function') return false;\n\tif (weakMap.get(x) !== 'one') return false;\n\n\treturn true;\n};\n","// Exports true if environment provides native `WeakMap` implementation, whatever that is.\n\n'use strict';\n\nmodule.exports = (function () {\n\tif (typeof WeakMap !== 'function') return false;\n\treturn (Object.prototype.toString.call(new WeakMap()) === '[object WeakMap]');\n}());\n","'use strict';\n\nvar setPrototypeOf    = require('es5-ext/object/set-prototype-of')\n  , object            = require('es5-ext/object/valid-object')\n  , value             = require('es5-ext/object/valid-value')\n  , randomUniq        = require('es5-ext/string/random-uniq')\n  , d                 = require('d')\n  , getIterator       = require('es6-iterator/get')\n  , forOf             = require('es6-iterator/for-of')\n  , toStringTagSymbol = require('es6-symbol').toStringTag\n  , isNative          = require('./is-native-implemented')\n\n  , isArray = Array.isArray, defineProperty = Object.defineProperty\n  , hasOwnProperty = Object.prototype.hasOwnProperty, getPrototypeOf = Object.getPrototypeOf\n  , WeakMapPoly;\n\nmodule.exports = WeakMapPoly = function (/*iterable*/) {\n\tvar iterable = arguments[0], self;\n\tif (!(this instanceof WeakMapPoly)) throw new TypeError('Constructor requires \\'new\\'');\n\tif (isNative && setPrototypeOf && (WeakMap !== WeakMapPoly)) {\n\t\tself = setPrototypeOf(new WeakMap(), getPrototypeOf(this));\n\t} else {\n\t\tself = this;\n\t}\n\tif (iterable != null) {\n\t\tif (!isArray(iterable)) iterable = getIterator(iterable);\n\t}\n\tdefineProperty(self, '__weakMapData__', d('c', '$weakMap$' + randomUniq()));\n\tif (!iterable) return self;\n\tforOf(iterable, function (val) {\n\t\tvalue(val);\n\t\tself.set(val[0], val[1]);\n\t});\n\treturn self;\n};\n\nif (isNative) {\n\tif (setPrototypeOf) setPrototypeOf(WeakMapPoly, WeakMap);\n\tWeakMapPoly.prototype = Object.create(WeakMap.prototype, {\n\t\tconstructor: d(WeakMapPoly)\n\t});\n}\n\nObject.defineProperties(WeakMapPoly.prototype, {\n\tdelete: d(function (key) {\n\t\tif (hasOwnProperty.call(object(key), this.__weakMapData__)) {\n\t\t\tdelete key[this.__weakMapData__];\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}),\n\tget: d(function (key) {\n\t\tif (hasOwnProperty.call(object(key), this.__weakMapData__)) {\n\t\t\treturn key[this.__weakMapData__];\n\t\t}\n\t}),\n\thas: d(function (key) {\n\t\treturn hasOwnProperty.call(object(key), this.__weakMapData__);\n\t}),\n\tset: d(function (key, value) {\n\t\tdefineProperty(object(key), this.__weakMapData__, d('c', value));\n\t\treturn this;\n\t}),\n\ttoString: d(function () { return '[object WeakMap]'; })\n});\ndefineProperty(WeakMapPoly.prototype, toStringTagSymbol, d('c', 'WeakMap'));\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/*\r\n |--------------------------------------------------------------------------\r\n | Drops base field\r\n |--------------------------------------------------------------------------\r\n |\r\n |\r\n |\r\n */\r\n\r\nimport assign from \"object-assign\";\r\nimport * as symbols from \"./symbols\";\r\nimport {listenOnce} from \"./utils\";\r\n\r\nexport default class Field {\r\n\r\n    /*\r\n     -------------------------------\r\n     Initializers\r\n     -------------------------------\r\n     */\r\n\r\n\r\n    constructor(input, options = {}) {\r\n        this.elements = {};\r\n        this.elements.input = input;\r\n\r\n        // Initialize\r\n        this[symbols.initializeOptions](options);\r\n        this[symbols.initializeView]();\r\n        this[symbols.initializeState]();\r\n        this[symbols.initializeEvents]();\r\n    }\r\n\r\n    [symbols.initializeOptions](options) {\r\n        this.options = assign({\r\n            placeholder: this.elements.input.placeholder || \"\",\r\n\r\n            getSelection(field, value) {\r\n                return value;\r\n            },\r\n\r\n            getPlaceholder(field, placeholder) {\r\n                return placeholder;\r\n            }\r\n\r\n        }, options);\r\n    }\r\n\r\n    [symbols.initializeView]() {\r\n        // Hide input element\r\n        this.elements.input.style.display = \"none\";\r\n\r\n        //\r\n        // Wrapper\r\n        //\r\n\r\n        this.elements.wrapper = document.createElement(\"div\");\r\n        this.elements.wrapper.className = \"drops \" + this.elements.input.className;\r\n\r\n        //\r\n        // Head\r\n        //\r\n\r\n        this.elements.head = document.createElement(\"div\");\r\n        this.elements.head.className = \"drops-head\";\r\n        this.elements.wrapper.appendChild(this.elements.head);\r\n\r\n        this.elements.placeholder = document.createElement(\"div\");\r\n        this.elements.placeholder.className = \"drops-placeholder\";\r\n        this.elements.placeholder.innerHTML = this.options.getPlaceholder(this, this.options.placeholder);\r\n        this.elements.head.appendChild(this.elements.placeholder);\r\n\r\n        this.elements.selection = document.createElement(\"div\");\r\n        this.elements.selection.className = \"drops-selection\";\r\n        this.elements.head.appendChild(this.elements.selection);\r\n\r\n        //\r\n        // Body\r\n        //\r\n\r\n        this.elements.body = document.createElement(\"div\");\r\n        this.elements.body.className = \"drops-body\";\r\n        this.elements.wrapper.appendChild(this.elements.body);\r\n\r\n        //\r\n        // Push input values to the view \r\n        //\r\n\r\n        if (this.elements.input.disabled) {\r\n            this.disable();\r\n        }\r\n\r\n        // Append view\r\n        if (this.elements.input.nextSibling) {\r\n            this.elements.input.parentNode.insertBefore(this.elements.wrapper, this.elements.input.nextSibling);\r\n        }\r\n        else {\r\n            this.elements.input.parentNode.appendChild(this.elements.wrapper);\r\n        }\r\n    }\r\n\r\n    [symbols.initializeState]() {\r\n        this[symbols.setSelection](this.get());\r\n    }\r\n\r\n    [symbols.initializeEvents]() {\r\n\r\n        //\r\n        // Click on placeholder\r\n        //\r\n\r\n        this.elements.head.addEventListener(\"click\", () => {\r\n            this.toggle();\r\n        });\r\n\r\n        //\r\n        // Click outside (on window)\r\n        //\r\n\r\n        window.addEventListener(\"click\", (e) => {\r\n            if ((this.elements.wrapper != e.target) && !this.elements.wrapper.contains(e.target)) {\r\n                this.close();\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    /*\r\n     -------------------------------\r\n     Open/Closed state\r\n     -------------------------------\r\n     */\r\n\r\n    get opened() {\r\n        return this.elements.wrapper.className.indexOf(\"drops-open\") > -1;\r\n    }\r\n\r\n    get closed() {\r\n        return !this.opened;\r\n    }\r\n\r\n    open(silent = false) {\r\n        if (this.opened || this.disabled) {\r\n            return this;\r\n        }\r\n\r\n        this.elements.wrapper.className += \" drops-open\";\r\n\r\n        // Trigger\r\n        if (silent == false) {\r\n            this.trigger(\"open\", this);\r\n\r\n            // Trigger opened on transition end\r\n            listenOnce(this.elements.body, \"transitionend\", () => {\r\n                this.trigger(\"opened\", this);\r\n            });\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    close(silent = false) {\r\n        if (this.closed || this.disabled) {\r\n            return this;\r\n        }\r\n\r\n        var classList = this.elements.wrapper.className.split(\" \"),\r\n            classIndex = classList.indexOf(\"drops-open\");\r\n\r\n        classList.splice(classIndex, 1);\r\n        this.elements.wrapper.className = classList.join(\" \");\r\n\r\n        // Trigger\r\n        if (silent == false) {\r\n            this.trigger(\"close\", this);\r\n\r\n            // Trigger closed on transition end\r\n            listenOnce(this.elements.body, \"transitionend\", () => {\r\n                this.trigger(\"closed\");\r\n            });\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    toggle() {\r\n        return this.opened ? this.close() : this.open();\r\n    }\r\n\r\n    /*\r\n     -------------------------------\r\n     Selection state\r\n     -------------------------------\r\n     */\r\n\r\n    [symbols.setSelection](value) {\r\n        // Clear\r\n        if ((value == null) || (value.length === 0)) {\r\n            return this[symbols.clearSelection]();\r\n        }\r\n\r\n        // Set\r\n        this.elements.selection.innerHTML = this.options.getSelection(this, value);\r\n        this.elements.wrapper.className += \" drops-has-selection\";\r\n\r\n        return this;\r\n    }\r\n\r\n    [symbols.clearSelection]() {\r\n        var classList = this.elements.wrapper.className.split(\" \"),\r\n            classIndex = classList.indexOf(\"drops-has-selection\");\r\n\r\n        if (classIndex > -1) {\r\n            classList.splice(classIndex, 1);\r\n            this.elements.wrapper.className = classList.join(\" \");\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /*\r\n     -------------------------------\r\n     Enable/Disabled state\r\n     -------------------------------\r\n     */\r\n\r\n    get disabled() {\r\n        return this.elements.wrapper.className.indexOf(\"drops-disabled\") > -1;\r\n    }\r\n\r\n    get enabled() {\r\n        return !this.disabled;\r\n    }\r\n\r\n    enable(silent = false) {\r\n        if (this.enabled) {\r\n            return this;\r\n        }\r\n\r\n        var classList = this.elements.wrapper.className.split(\" \"),\r\n            disabledIndex = classList.indexOf(\"drops-disabled\");\r\n\r\n        classList.splice(disabledIndex, 1);\r\n\r\n        this.elements.wrapper.className = classList.join(\" \");\r\n\r\n        // Trigger\r\n        if (silent == false) {\r\n            this.trigger(\"enable\", this);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    disable(silent = false) {\r\n        if (this.disabled) {\r\n            return this;\r\n        }\r\n\r\n        this.elements.wrapper.className += \" drops-disabled\";\r\n\r\n        if (silent == false) {\r\n            this.trigger(\"disable\", this);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /*\r\n     -------------------------------\r\n     Value mutators\r\n     -------------------------------\r\n     */\r\n\r\n    [symbols.getValue]() {\r\n        return this.elements.input.value;\r\n    }\r\n\r\n    [symbols.setValue](value) {\r\n        if (this.get() === value) {\r\n            return false;\r\n        }\r\n\r\n        this.elements.input.value = value || \"\";\r\n        return true;\r\n    }\r\n\r\n    get() {\r\n        return this[symbols.getValue]();\r\n    }\r\n\r\n    set(value, silent = false) {\r\n        if (this[symbols.setValue](value)) {\r\n            this[symbols.setSelection](this.get());\r\n\r\n            if (!silent) {\r\n                this.trigger(\"change\", this);\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /*\r\n     -------------------------------\r\n     Events\r\n     -------------------------------\r\n     */\r\n\r\n    on(eventName, callback) {\r\n        this.elements.input.addEventListener(eventName, callback);\r\n        return this;\r\n    }\r\n\r\n    off(eventName, callback) {\r\n        this.elements.input.removeEventListener(eventName, callback);\r\n        return this;\r\n    }\r\n\r\n    trigger(eventName, data = {}) {\r\n        var event = new Event(eventName, data);\r\n        this.elements.input.dispatchEvent(event);\r\n        return this;\r\n    }\r\n\r\n}","/*\r\n |--------------------------------------------------------------------------\r\n | Select field\r\n |--------------------------------------------------------------------------\r\n |\r\n |\r\n |\r\n */\r\n\r\nimport assign from \"object-assign\";\r\nimport Field from \"./Field\";\r\nimport * as symbols from \"./symbols\";\r\nimport {debounce} from \"./utils\";\r\nimport Symbol from \"es6-symbol\";\r\n\r\n// Local symbols\r\n\r\nexport default class SelectField extends Field {\r\n\r\n    /*\r\n     -------------------------------\r\n     Initializers\r\n     -------------------------------\r\n     */\r\n\r\n    constructor(input, options = {}) {\r\n        if (input.nodeName.toLowerCase() !== \"select\") {\r\n            throw new Error(\"The select field can only instantiate select elements!\");\r\n            return;\r\n        }\r\n\r\n        super(input, options);\r\n    }\r\n\r\n    [symbols.initializeOptions](options) {\r\n        super[symbols.initializeOptions](options);\r\n\r\n        this.options = assign(this.options, {\r\n            placeholder: this.elements.input.dataset.placeholder || \"\",\r\n\r\n            // Query\r\n            queryOptions: true,\r\n            queryPlaceholder: \"Filter options...\",\r\n            queryDebounce: 250,\r\n            query(field, options, query) {\r\n                // Filter by label\r\n                options.forEach((option) => {\r\n                    option.style.display = option.dataset.label.indexOf(query) === 0 ?\r\n                        \"block\" : \"none\";\r\n                });\r\n            },\r\n\r\n            // Selection\r\n            getSelection(field, value) {\r\n                var data = field.getOptionData(value);\r\n                return data ? data.label : \"\";\r\n            },\r\n\r\n            // Option\r\n            getOption(data) {\r\n                return data.label;\r\n            }\r\n\r\n        }, options);\r\n    }\r\n\r\n    [symbols.initializeView]() {\r\n        super[symbols.initializeView]();\r\n\r\n        //\r\n        // Overrides\r\n        //\r\n\r\n        this.elements.wrapper.className += \" drops-select\";\r\n\r\n        //\r\n        // Options query\r\n        //\r\n\r\n        if (this.options.queryOptions) {\r\n            this.elements.query = document.createElement(\"div\");\r\n            this.elements.query.className = \"drops-query\";\r\n            this.elements.body.appendChild(this.elements.query);\r\n\r\n            this.elements.queryInput = document.createElement(\"input\");\r\n            this.elements.queryInput.type = \"text\";\r\n            this.elements.queryInput.placeholder = this.options.queryPlaceholder;\r\n            this.elements.query.appendChild(this.elements.queryInput);\r\n        }\r\n\r\n        //\r\n        // Options\r\n        //\r\n\r\n        this.elements.options = document.createElement(\"div\");\r\n        this.elements.options.className = \"drops-options\";\r\n        this.elements.body.appendChild(this.elements.options);\r\n    }\r\n\r\n    [symbols.initializeState]() {\r\n        var options = [];\r\n\r\n        Array.prototype.slice.call(this.elements.input.options).forEach((option) => {\r\n            options.push({\r\n                value: option.value,\r\n                label: option.innerText,\r\n                selected: option.selected\r\n            });\r\n        });\r\n\r\n        this.setOptions(options, true);\r\n    }\r\n\r\n    [symbols.initializeEvents]() {\r\n        super[symbols.initializeEvents]();\r\n\r\n        //\r\n        // Options click event\r\n        //\r\n\r\n        this.elements.options.addEventListener(\"click\", (e) => {\r\n            if (e.target.className.indexOf(\"drops-option\") > -1) {\r\n                this.set(e.target.dataset.value);\r\n                this.close();\r\n            }\r\n        });\r\n\r\n        //\r\n        // Query input\r\n        //\r\n\r\n        if (this.elements.queryInput) {\r\n\r\n            // Filter on input\r\n            this.elements.queryInput.addEventListener(\"input\", debounce(this.options.queryDebounce, () => {\r\n                this.options.query(\r\n                    this,\r\n                    this.elements.options.querySelectorAll(\".drops-option\"),\r\n                    this.elements.queryInput.value\r\n                );\r\n            }));\r\n\r\n            // Focus on open\r\n            this.on(\"opened\", () => {\r\n                this.elements.queryInput.focus();\r\n            });\r\n        }\r\n    }\r\n\r\n    /*\r\n     -------------------------------\r\n     Option management\r\n     -------------------------------\r\n     */\r\n\r\n    getOptionData(value) {\r\n        var option = this.elements.options.querySelector(`.drops-option[data-value='${value}']`);\r\n        return option ? option.dataset : null;\r\n    }\r\n\r\n    setOptions(options, silent = false) {\r\n        // Clear selection\r\n        this.set(null, true);\r\n\r\n        // Clear current options\r\n        this.elements.input.innerHTML = \"\";\r\n        this.elements.options.innerHTML = \"\";\r\n\r\n        // Push placeholder input option\r\n        var placeholder = document.createElement(\"option\");\r\n        placeholder.value = \"\";\r\n        placeholder.innerText = this.options.placeholder;\r\n        this.elements.input.appendChild(placeholder);\r\n\r\n        // Build options\r\n        var selection;\r\n\r\n        options.forEach((optionData) => {\r\n            if ((typeof optionData.value !== \"string\") || (optionData.value.length === 0)) {\r\n                return;\r\n            }\r\n\r\n            if (!optionData.label) {\r\n                optionData.label = optionData.value;\r\n            }\r\n\r\n            // Create input option\r\n            var inputOption = document.createElement(\"option\");\r\n            inputOption.value = optionData.value;\r\n            inputOption.innerText = optionData.label;\r\n            this.elements.input.appendChild(inputOption);\r\n\r\n            // Create option\r\n            var option = document.createElement(\"div\");\r\n            option.className = \"drops-option\";\r\n            option.innerHTML = this.options.getOption(optionData);\r\n\r\n            Object.keys(optionData).forEach((key) => {\r\n                option.dataset[key] = optionData[key];\r\n            });\r\n\r\n            this.elements.options.appendChild(option);\r\n\r\n            // Select if selected\r\n            if (optionData.selected) {\r\n                selection = optionData.value;\r\n            }\r\n        });\r\n\r\n        // Set selection\r\n        this.set(selection, silent);\r\n    }\r\n\r\n    /*\r\n     -------------------------------\r\n     Value\r\n     -------------------------------\r\n     */\r\n\r\n    [symbols.setValue](value) {\r\n        if (this.get() === value) {\r\n            return false;\r\n        }\r\n\r\n        // Get option\r\n        var option;\r\n\r\n        if ((value != null) && (value.length > 0)) {\r\n            option = this.elements.options.querySelector(`.drops-option[data-value='${value}']`);\r\n\r\n            if (!option) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        // Clear current selection\r\n        var current = this.elements.options.querySelector(\".drops-option.drops-selected\");\r\n\r\n        if (current) {\r\n            var currentClasses = current.className.split(\" \"),\r\n                selectedIndex = currentClasses.indexOf(\"drops-selected\");\r\n\r\n            currentClasses.splice(selectedIndex, 1);\r\n            current.className = currentClasses.join(\" \");\r\n            current.dataset.selected = false;\r\n        }\r\n\r\n        // Clear input selection\r\n        this.elements.input.value = \"\";\r\n\r\n        // Set new selection\r\n        if (option) {\r\n            option.className += \" drops-selected\";\r\n            option.dataset.selected = true;\r\n            this.elements.input.value = value;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n}","/*\r\n |--------------------------------------------------------------------------\r\n | Drops\r\n |--------------------------------------------------------------------------\r\n |\r\n |\r\n |\r\n */\r\n\r\nimport Field from \"./Field\";\r\nimport Select from \"./Select\";\r\nimport {create, register, instance} from \"./manager\";\r\nimport symbols from \"./symbols\";\r\n\r\n(function (root, factory) {\r\n    var drops = factory();\r\n\r\n    // Common JS (since this is browserify it's fair to export all the time)\r\n    module.exports = drops;\r\n\r\n    // AMD\r\n    if (typeof define === \"function\" && define.amd) {\r\n        define(() => {\r\n            return drops;\r\n        });\r\n    }\r\n\r\n    // Window\r\n    else {\r\n        root.drops = drops;\r\n    }\r\n\r\n})(window || global, function () {\r\n\r\n    // Push bundled fields\r\n    register(\"select\", Select);\r\n\r\n    // Export\r\n    return {\r\n        Field: Field,\r\n        Select: Select,\r\n        create: create,\r\n        register: register,\r\n        instance: instance,\r\n        symbols: symbols\r\n    };\r\n});","/*\r\n |--------------------------------------------------------------------------\r\n | Field manager (create and retrieve instances)\r\n |--------------------------------------------------------------------------\r\n |\r\n |\r\n |\r\n */\r\n\r\nimport WeakMap from \"es6-weak-map\";\r\n\r\n//\r\n// Locals\r\n//\r\n\r\nvar instances = new WeakMap(),\r\n    types = {};\r\n\r\n//\r\n// Register a new type of field\r\n//\r\n\r\nexport function register(typeName, typeClass) {\r\n    types[typeName] = typeClass;\r\n}\r\n\r\n//\r\n// Creates a new field instance\r\n//\r\n\r\nexport function create(type, element, options = {}) {\r\n    // Check if already an instance\r\n    if (instances.get(element)) {\r\n        throw new Error(\"A field instance already exists on the element!\");\r\n        return;\r\n    }\r\n\r\n    // Check class\r\n    if (!types[type]) {\r\n        throw new Error(\"The type could not be found!\");\r\n        return;\r\n    }\r\n\r\n    var instance = new types[type](element, options);\r\n    instances.set(element, instance);\r\n\r\n    return instance;\r\n}\r\n\r\n//\r\n// Retrieves an instance for a specific element\r\n//\r\n\r\nexport function instance(element) {\r\n    return instances.get(element);\r\n}\r\n","/*\r\n |--------------------------------------------------------------------------\r\n | Symbols used in the field class\r\n |--------------------------------------------------------------------------\r\n |\r\n |\r\n |\r\n */\r\n\r\nimport Symbol from \"es6-symbol\";\r\n\r\nexport const initializeOptions = Symbol(\"initializeOptions\");\r\nexport const initializeView = Symbol(\"initializeView\");\r\nexport const initializeEvents = Symbol(\"initializeEvents\");\r\nexport const initializeState = Symbol(\"initializeState\");\r\nexport const setSelection = Symbol(\"setSelection\");\r\nexport const clearSelection = Symbol(\"clearSelection\");\r\nexport const setValue = Symbol(\"setValue\");\r\nexport const getValue = Symbol(\"getValue\");","/**\r\n * Debounces a function\r\n *\r\n * @param {int} timeout\r\n * @param {Function} callback\r\n * @returns {Function}\r\n */\r\n\r\nexport function debounce(timeout, callback) {\r\n    var timer;\r\n\r\n    return function () {\r\n        var args = arguments;\r\n\r\n        if (timer) {\r\n            clearTimeout(timer);\r\n            timer = null;\r\n        }\r\n\r\n        timer = setTimeout(() => {\r\n            timer = null;\r\n            callback.apply(this, args);\r\n\r\n        }, timeout);\r\n    };\r\n}\r\n\r\n/**\r\n * Adds a listener that triggers once on a specific element\r\n *\r\n * @param element\r\n * @param eventName\r\n * @param callback\r\n */\r\n\r\nexport function listenOnce(element, eventName, callback) {\r\n    function callbackWrapper() {\r\n        element.removeEventListener(eventName, callbackWrapper);\r\n        callback.apply(this, arguments);\r\n    }\r\n\r\n    element.addEventListener(eventName, callbackWrapper);\r\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvZC9hdXRvLWJpbmQuanMiLCJub2RlX21vZHVsZXMvZC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9lczUtZXh0L2FycmF5LyMvY2xlYXIuanMiLCJub2RlX21vZHVsZXMvZXM1LWV4dC9mdW5jdGlvbi9pcy1hcmd1bWVudHMuanMiLCJub2RlX21vZHVsZXMvZXM1LWV4dC9vYmplY3QvX2l0ZXJhdGUuanMiLCJub2RlX21vZHVsZXMvZXM1LWV4dC9vYmplY3QvYXNzaWduL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2VzNS1leHQvb2JqZWN0L2Fzc2lnbi9pcy1pbXBsZW1lbnRlZC5qcyIsIm5vZGVfbW9kdWxlcy9lczUtZXh0L29iamVjdC9hc3NpZ24vc2hpbS5qcyIsIm5vZGVfbW9kdWxlcy9lczUtZXh0L29iamVjdC9jb3B5LmpzIiwibm9kZV9tb2R1bGVzL2VzNS1leHQvb2JqZWN0L2NyZWF0ZS5qcyIsIm5vZGVfbW9kdWxlcy9lczUtZXh0L29iamVjdC9mb3ItZWFjaC5qcyIsIm5vZGVfbW9kdWxlcy9lczUtZXh0L29iamVjdC9pcy1jYWxsYWJsZS5qcyIsIm5vZGVfbW9kdWxlcy9lczUtZXh0L29iamVjdC9pcy1vYmplY3QuanMiLCJub2RlX21vZHVsZXMvZXM1LWV4dC9vYmplY3Qva2V5cy9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9lczUtZXh0L29iamVjdC9rZXlzL2lzLWltcGxlbWVudGVkLmpzIiwibm9kZV9tb2R1bGVzL2VzNS1leHQvb2JqZWN0L2tleXMvc2hpbS5qcyIsIm5vZGVfbW9kdWxlcy9lczUtZXh0L29iamVjdC9tYXAuanMiLCJub2RlX21vZHVsZXMvZXM1LWV4dC9vYmplY3Qvbm9ybWFsaXplLW9wdGlvbnMuanMiLCJub2RlX21vZHVsZXMvZXM1LWV4dC9vYmplY3Qvc2V0LXByb3RvdHlwZS1vZi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9lczUtZXh0L29iamVjdC9zZXQtcHJvdG90eXBlLW9mL2lzLWltcGxlbWVudGVkLmpzIiwibm9kZV9tb2R1bGVzL2VzNS1leHQvb2JqZWN0L3NldC1wcm90b3R5cGUtb2Yvc2hpbS5qcyIsIm5vZGVfbW9kdWxlcy9lczUtZXh0L29iamVjdC92YWxpZC1jYWxsYWJsZS5qcyIsIm5vZGVfbW9kdWxlcy9lczUtZXh0L29iamVjdC92YWxpZC1vYmplY3QuanMiLCJub2RlX21vZHVsZXMvZXM1LWV4dC9vYmplY3QvdmFsaWQtdmFsdWUuanMiLCJub2RlX21vZHVsZXMvZXM1LWV4dC9zdHJpbmcvIy9jb250YWlucy9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9lczUtZXh0L3N0cmluZy8jL2NvbnRhaW5zL2lzLWltcGxlbWVudGVkLmpzIiwibm9kZV9tb2R1bGVzL2VzNS1leHQvc3RyaW5nLyMvY29udGFpbnMvc2hpbS5qcyIsIm5vZGVfbW9kdWxlcy9lczUtZXh0L3N0cmluZy9pcy1zdHJpbmcuanMiLCJub2RlX21vZHVsZXMvZXM1LWV4dC9zdHJpbmcvcmFuZG9tLXVuaXEuanMiLCJub2RlX21vZHVsZXMvZXM2LWl0ZXJhdG9yL2FycmF5LmpzIiwibm9kZV9tb2R1bGVzL2VzNi1pdGVyYXRvci9mb3Itb2YuanMiLCJub2RlX21vZHVsZXMvZXM2LWl0ZXJhdG9yL2dldC5qcyIsIm5vZGVfbW9kdWxlcy9lczYtaXRlcmF0b3IvaW5kZXguanMiLCJub2RlX21vZHVsZXMvZXM2LWl0ZXJhdG9yL2lzLWl0ZXJhYmxlLmpzIiwibm9kZV9tb2R1bGVzL2VzNi1pdGVyYXRvci9zdHJpbmcuanMiLCJub2RlX21vZHVsZXMvZXM2LWl0ZXJhdG9yL3ZhbGlkLWl0ZXJhYmxlLmpzIiwibm9kZV9tb2R1bGVzL2VzNi1zeW1ib2wvaW5kZXguanMiLCJub2RlX21vZHVsZXMvZXM2LXN5bWJvbC9pcy1pbXBsZW1lbnRlZC5qcyIsIm5vZGVfbW9kdWxlcy9lczYtc3ltYm9sL2lzLXN5bWJvbC5qcyIsIm5vZGVfbW9kdWxlcy9lczYtc3ltYm9sL3BvbHlmaWxsLmpzIiwibm9kZV9tb2R1bGVzL2VzNi1zeW1ib2wvdmFsaWRhdGUtc3ltYm9sLmpzIiwibm9kZV9tb2R1bGVzL2VzNi13ZWFrLW1hcC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9lczYtd2Vhay1tYXAvaXMtaW1wbGVtZW50ZWQuanMiLCJub2RlX21vZHVsZXMvZXM2LXdlYWstbWFwL2lzLW5hdGl2ZS1pbXBsZW1lbnRlZC5qcyIsIm5vZGVfbW9kdWxlcy9lczYtd2Vhay1tYXAvcG9seWZpbGwuanMiLCJub2RlX21vZHVsZXMvb2JqZWN0LWFzc2lnbi9pbmRleC5qcyIsInNyY1xcanNcXEZpZWxkLmpzIiwic3JjXFxqc1xcU2VsZWN0LmpzIiwic3JjXFxqc1xcc3JjXFxqc1xcaW5kZXguanMiLCJzcmNcXGpzXFxtYW5hZ2VyLmpzIiwic3JjXFxqc1xcc3ltYm9scy5qcyIsInNyY1xcanNcXHV0aWxzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BDQTtBQUNBO0FBQ0E7QUFDQTs7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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IihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY29weSAgICAgICAgICAgICA9IHJlcXVpcmUoJ2VzNS1leHQvb2JqZWN0L2NvcHknKVxuICAsIG5vcm1hbGl6ZU9wdGlvbnMgPSByZXF1aXJlKCdlczUtZXh0L29iamVjdC9ub3JtYWxpemUtb3B0aW9ucycpXG4gICwgZW5zdXJlQ2FsbGFibGUgICA9IHJlcXVpcmUoJ2VzNS1leHQvb2JqZWN0L3ZhbGlkLWNhbGxhYmxlJylcbiAgLCBtYXAgICAgICAgICAgICAgID0gcmVxdWlyZSgnZXM1LWV4dC9vYmplY3QvbWFwJylcbiAgLCBjYWxsYWJsZSAgICAgICAgID0gcmVxdWlyZSgnZXM1LWV4dC9vYmplY3QvdmFsaWQtY2FsbGFibGUnKVxuICAsIHZhbGlkVmFsdWUgICAgICAgPSByZXF1aXJlKCdlczUtZXh0L29iamVjdC92YWxpZC12YWx1ZScpXG5cbiAgLCBiaW5kID0gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQsIGRlZmluZVByb3BlcnR5ID0gT2JqZWN0LmRlZmluZVByb3BlcnR5XG4gICwgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5XG4gICwgZGVmaW5lO1xuXG5kZWZpbmUgPSBmdW5jdGlvbiAobmFtZSwgZGVzYywgb3B0aW9ucykge1xuXHR2YXIgdmFsdWUgPSB2YWxpZFZhbHVlKGRlc2MpICYmIGNhbGxhYmxlKGRlc2MudmFsdWUpLCBkZ3M7XG5cdGRncyA9IGNvcHkoZGVzYyk7XG5cdGRlbGV0ZSBkZ3Mud3JpdGFibGU7XG5cdGRlbGV0ZSBkZ3MudmFsdWU7XG5cdGRncy5nZXQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKCFvcHRpb25zLm92ZXJ3cml0ZURlZmluaXRpb24gJiYgaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLCBuYW1lKSkgcmV0dXJuIHZhbHVlO1xuXHRcdGRlc2MudmFsdWUgPSBiaW5kLmNhbGwodmFsdWUsIG9wdGlvbnMucmVzb2x2ZUNvbnRleHQgPyBvcHRpb25zLnJlc29sdmVDb250ZXh0KHRoaXMpIDogdGhpcyk7XG5cdFx0ZGVmaW5lUHJvcGVydHkodGhpcywgbmFtZSwgZGVzYyk7XG5cdFx0cmV0dXJuIHRoaXNbbmFtZV07XG5cdH07XG5cdHJldHVybiBkZ3M7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChwcm9wcy8qLCBvcHRpb25zKi8pIHtcblx0dmFyIG9wdGlvbnMgPSBub3JtYWxpemVPcHRpb25zKGFyZ3VtZW50c1sxXSk7XG5cdGlmIChvcHRpb25zLnJlc29sdmVDb250ZXh0ICE9IG51bGwpIGVuc3VyZUNhbGxhYmxlKG9wdGlvbnMucmVzb2x2ZUNvbnRleHQpO1xuXHRyZXR1cm4gbWFwKHByb3BzLCBmdW5jdGlvbiAoZGVzYywgbmFtZSkgeyByZXR1cm4gZGVmaW5lKG5hbWUsIGRlc2MsIG9wdGlvbnMpOyB9KTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBhc3NpZ24gICAgICAgID0gcmVxdWlyZSgnZXM1LWV4dC9vYmplY3QvYXNzaWduJylcbiAgLCBub3JtYWxpemVPcHRzID0gcmVxdWlyZSgnZXM1LWV4dC9vYmplY3Qvbm9ybWFsaXplLW9wdGlvbnMnKVxuICAsIGlzQ2FsbGFibGUgICAgPSByZXF1aXJlKCdlczUtZXh0L29iamVjdC9pcy1jYWxsYWJsZScpXG4gICwgY29udGFpbnMgICAgICA9IHJlcXVpcmUoJ2VzNS1leHQvc3RyaW5nLyMvY29udGFpbnMnKVxuXG4gICwgZDtcblxuZCA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGRzY3IsIHZhbHVlLyosIG9wdGlvbnMqLykge1xuXHR2YXIgYywgZSwgdywgb3B0aW9ucywgZGVzYztcblx0aWYgKChhcmd1bWVudHMubGVuZ3RoIDwgMikgfHwgKHR5cGVvZiBkc2NyICE9PSAnc3RyaW5nJykpIHtcblx0XHRvcHRpb25zID0gdmFsdWU7XG5cdFx0dmFsdWUgPSBkc2NyO1xuXHRcdGRzY3IgPSBudWxsO1xuXHR9IGVsc2Uge1xuXHRcdG9wdGlvbnMgPSBhcmd1bWVudHNbMl07XG5cdH1cblx0aWYgKGRzY3IgPT0gbnVsbCkge1xuXHRcdGMgPSB3ID0gdHJ1ZTtcblx0XHRlID0gZmFsc2U7XG5cdH0gZWxzZSB7XG5cdFx0YyA9IGNvbnRhaW5zLmNhbGwoZHNjciwgJ2MnKTtcblx0XHRlID0gY29udGFpbnMuY2FsbChkc2NyLCAnZScpO1xuXHRcdHcgPSBjb250YWlucy5jYWxsKGRzY3IsICd3Jyk7XG5cdH1cblxuXHRkZXNjID0geyB2YWx1ZTogdmFsdWUsIGNvbmZpZ3VyYWJsZTogYywgZW51bWVyYWJsZTogZSwgd3JpdGFibGU6IHcgfTtcblx0cmV0dXJuICFvcHRpb25zID8gZGVzYyA6IGFzc2lnbihub3JtYWxpemVPcHRzKG9wdGlvbnMpLCBkZXNjKTtcbn07XG5cbmQuZ3MgPSBmdW5jdGlvbiAoZHNjciwgZ2V0LCBzZXQvKiwgb3B0aW9ucyovKSB7XG5cdHZhciBjLCBlLCBvcHRpb25zLCBkZXNjO1xuXHRpZiAodHlwZW9mIGRzY3IgIT09ICdzdHJpbmcnKSB7XG5cdFx0b3B0aW9ucyA9IHNldDtcblx0XHRzZXQgPSBnZXQ7XG5cdFx0Z2V0ID0gZHNjcjtcblx0XHRkc2NyID0gbnVsbDtcblx0fSBlbHNlIHtcblx0XHRvcHRpb25zID0gYXJndW1lbnRzWzNdO1xuXHR9XG5cdGlmIChnZXQgPT0gbnVsbCkge1xuXHRcdGdldCA9IHVuZGVmaW5lZDtcblx0fSBlbHNlIGlmICghaXNDYWxsYWJsZShnZXQpKSB7XG5cdFx0b3B0aW9ucyA9IGdldDtcblx0XHRnZXQgPSBzZXQgPSB1bmRlZmluZWQ7XG5cdH0gZWxzZSBpZiAoc2V0ID09IG51bGwpIHtcblx0XHRzZXQgPSB1bmRlZmluZWQ7XG5cdH0gZWxzZSBpZiAoIWlzQ2FsbGFibGUoc2V0KSkge1xuXHRcdG9wdGlvbnMgPSBzZXQ7XG5cdFx0c2V0ID0gdW5kZWZpbmVkO1xuXHR9XG5cdGlmIChkc2NyID09IG51bGwpIHtcblx0XHRjID0gdHJ1ZTtcblx0XHRlID0gZmFsc2U7XG5cdH0gZWxzZSB7XG5cdFx0YyA9IGNvbnRhaW5zLmNhbGwoZHNjciwgJ2MnKTtcblx0XHRlID0gY29udGFpbnMuY2FsbChkc2NyLCAnZScpO1xuXHR9XG5cblx0ZGVzYyA9IHsgZ2V0OiBnZXQsIHNldDogc2V0LCBjb25maWd1cmFibGU6IGMsIGVudW1lcmFibGU6IGUgfTtcblx0cmV0dXJuICFvcHRpb25zID8gZGVzYyA6IGFzc2lnbihub3JtYWxpemVPcHRzKG9wdGlvbnMpLCBkZXNjKTtcbn07XG4iLCIvLyBJbnNwaXJlZCBieSBHb29nbGUgQ2xvc3VyZTpcbi8vIGh0dHA6Ly9jbG9zdXJlLWxpYnJhcnkuZ29vZ2xlY29kZS5jb20vc3ZuL2RvY3MvXG4vLyBjbG9zdXJlX2dvb2dfYXJyYXlfYXJyYXkuanMuaHRtbCNnb29nLmFycmF5LmNsZWFyXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIHZhbHVlID0gcmVxdWlyZSgnLi4vLi4vb2JqZWN0L3ZhbGlkLXZhbHVlJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHR2YWx1ZSh0aGlzKS5sZW5ndGggPSAwO1xuXHRyZXR1cm4gdGhpcztcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmdcblxuICAsIGlkID0gdG9TdHJpbmcuY2FsbCgoZnVuY3Rpb24gKCkgeyByZXR1cm4gYXJndW1lbnRzOyB9KCkpKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoeCkgeyByZXR1cm4gKHRvU3RyaW5nLmNhbGwoeCkgPT09IGlkKTsgfTtcbiIsIi8vIEludGVybmFsIG1ldGhvZCwgdXNlZCBieSBpdGVyYXRpb24gZnVuY3Rpb25zLlxuLy8gQ2FsbHMgYSBmdW5jdGlvbiBmb3IgZWFjaCBrZXktdmFsdWUgcGFpciBmb3VuZCBpbiBvYmplY3Rcbi8vIE9wdGlvbmFsbHkgdGFrZXMgY29tcGFyZUZuIHRvIGl0ZXJhdGUgb2JqZWN0IGluIHNwZWNpZmljIG9yZGVyXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGNhbGxhYmxlID0gcmVxdWlyZSgnLi92YWxpZC1jYWxsYWJsZScpXG4gICwgdmFsdWUgICAgPSByZXF1aXJlKCcuL3ZhbGlkLXZhbHVlJylcblxuICAsIGJpbmQgPSBGdW5jdGlvbi5wcm90b3R5cGUuYmluZCwgY2FsbCA9IEZ1bmN0aW9uLnByb3RvdHlwZS5jYWxsLCBrZXlzID0gT2JqZWN0LmtleXNcbiAgLCBwcm9wZXJ0eUlzRW51bWVyYWJsZSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG1ldGhvZCwgZGVmVmFsKSB7XG5cdHJldHVybiBmdW5jdGlvbiAob2JqLCBjYi8qLCB0aGlzQXJnLCBjb21wYXJlRm4qLykge1xuXHRcdHZhciBsaXN0LCB0aGlzQXJnID0gYXJndW1lbnRzWzJdLCBjb21wYXJlRm4gPSBhcmd1bWVudHNbM107XG5cdFx0b2JqID0gT2JqZWN0KHZhbHVlKG9iaikpO1xuXHRcdGNhbGxhYmxlKGNiKTtcblxuXHRcdGxpc3QgPSBrZXlzKG9iaik7XG5cdFx0aWYgKGNvbXBhcmVGbikge1xuXHRcdFx0bGlzdC5zb3J0KCh0eXBlb2YgY29tcGFyZUZuID09PSAnZnVuY3Rpb24nKSA/IGJpbmQuY2FsbChjb21wYXJlRm4sIG9iaikgOiB1bmRlZmluZWQpO1xuXHRcdH1cblx0XHRpZiAodHlwZW9mIG1ldGhvZCAhPT0gJ2Z1bmN0aW9uJykgbWV0aG9kID0gbGlzdFttZXRob2RdO1xuXHRcdHJldHVybiBjYWxsLmNhbGwobWV0aG9kLCBsaXN0LCBmdW5jdGlvbiAoa2V5LCBpbmRleCkge1xuXHRcdFx0aWYgKCFwcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKG9iaiwga2V5KSkgcmV0dXJuIGRlZlZhbDtcblx0XHRcdHJldHVybiBjYWxsLmNhbGwoY2IsIHRoaXNBcmcsIG9ialtrZXldLCBrZXksIG9iaiwgaW5kZXgpO1xuXHRcdH0pO1xuXHR9O1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2lzLWltcGxlbWVudGVkJykoKVxuXHQ/IE9iamVjdC5hc3NpZ25cblx0OiByZXF1aXJlKCcuL3NoaW0nKTtcbiIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdHZhciBhc3NpZ24gPSBPYmplY3QuYXNzaWduLCBvYmo7XG5cdGlmICh0eXBlb2YgYXNzaWduICE9PSAnZnVuY3Rpb24nKSByZXR1cm4gZmFsc2U7XG5cdG9iaiA9IHsgZm9vOiAncmF6JyB9O1xuXHRhc3NpZ24ob2JqLCB7IGJhcjogJ2R3YScgfSwgeyB0cnp5OiAndHJ6eScgfSk7XG5cdHJldHVybiAob2JqLmZvbyArIG9iai5iYXIgKyBvYmoudHJ6eSkgPT09ICdyYXpkd2F0cnp5Jztcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBrZXlzICA9IHJlcXVpcmUoJy4uL2tleXMnKVxuICAsIHZhbHVlID0gcmVxdWlyZSgnLi4vdmFsaWQtdmFsdWUnKVxuXG4gICwgbWF4ID0gTWF0aC5tYXg7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGRlc3QsIHNyYy8qLCDigKZzcmNuKi8pIHtcblx0dmFyIGVycm9yLCBpLCBsID0gbWF4KGFyZ3VtZW50cy5sZW5ndGgsIDIpLCBhc3NpZ247XG5cdGRlc3QgPSBPYmplY3QodmFsdWUoZGVzdCkpO1xuXHRhc3NpZ24gPSBmdW5jdGlvbiAoa2V5KSB7XG5cdFx0dHJ5IHsgZGVzdFtrZXldID0gc3JjW2tleV07IH0gY2F0Y2ggKGUpIHtcblx0XHRcdGlmICghZXJyb3IpIGVycm9yID0gZTtcblx0XHR9XG5cdH07XG5cdGZvciAoaSA9IDE7IGkgPCBsOyArK2kpIHtcblx0XHRzcmMgPSBhcmd1bWVudHNbaV07XG5cdFx0a2V5cyhzcmMpLmZvckVhY2goYXNzaWduKTtcblx0fVxuXHRpZiAoZXJyb3IgIT09IHVuZGVmaW5lZCkgdGhyb3cgZXJyb3I7XG5cdHJldHVybiBkZXN0O1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vYXNzaWduJylcbiAgLCB2YWx1ZSAgPSByZXF1aXJlKCcuL3ZhbGlkLXZhbHVlJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iaikge1xuXHR2YXIgY29weSA9IE9iamVjdCh2YWx1ZShvYmopKTtcblx0aWYgKGNvcHkgIT09IG9iaikgcmV0dXJuIGNvcHk7XG5cdHJldHVybiBhc3NpZ24oe30sIG9iaik7XG59O1xuIiwiLy8gV29ya2Fyb3VuZCBmb3IgaHR0cDovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MjgwNFxuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBjcmVhdGUgPSBPYmplY3QuY3JlYXRlLCBzaGltO1xuXG5pZiAoIXJlcXVpcmUoJy4vc2V0LXByb3RvdHlwZS1vZi9pcy1pbXBsZW1lbnRlZCcpKCkpIHtcblx0c2hpbSA9IHJlcXVpcmUoJy4vc2V0LXByb3RvdHlwZS1vZi9zaGltJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uICgpIHtcblx0dmFyIG51bGxPYmplY3QsIHByb3BzLCBkZXNjO1xuXHRpZiAoIXNoaW0pIHJldHVybiBjcmVhdGU7XG5cdGlmIChzaGltLmxldmVsICE9PSAxKSByZXR1cm4gY3JlYXRlO1xuXG5cdG51bGxPYmplY3QgPSB7fTtcblx0cHJvcHMgPSB7fTtcblx0ZGVzYyA9IHsgY29uZmlndXJhYmxlOiBmYWxzZSwgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLFxuXHRcdHZhbHVlOiB1bmRlZmluZWQgfTtcblx0T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoT2JqZWN0LnByb3RvdHlwZSkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuXHRcdGlmIChuYW1lID09PSAnX19wcm90b19fJykge1xuXHRcdFx0cHJvcHNbbmFtZV0gPSB7IGNvbmZpZ3VyYWJsZTogdHJ1ZSwgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLFxuXHRcdFx0XHR2YWx1ZTogdW5kZWZpbmVkIH07XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHByb3BzW25hbWVdID0gZGVzYztcblx0fSk7XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG51bGxPYmplY3QsIHByb3BzKTtcblxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoc2hpbSwgJ251bGxQb2x5ZmlsbCcsIHsgY29uZmlndXJhYmxlOiBmYWxzZSxcblx0XHRlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IGZhbHNlLCB2YWx1ZTogbnVsbE9iamVjdCB9KTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gKHByb3RvdHlwZSwgcHJvcHMpIHtcblx0XHRyZXR1cm4gY3JlYXRlKChwcm90b3R5cGUgPT09IG51bGwpID8gbnVsbE9iamVjdCA6IHByb3RvdHlwZSwgcHJvcHMpO1xuXHR9O1xufSgpKTtcbiIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL19pdGVyYXRlJykoJ2ZvckVhY2gnKTtcbiIsIi8vIERlcHJlY2F0ZWRcblxuJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmogPT09ICdmdW5jdGlvbic7IH07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBtYXAgPSB7ICdmdW5jdGlvbic6IHRydWUsIG9iamVjdDogdHJ1ZSB9O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh4KSB7XG5cdHJldHVybiAoKHggIT0gbnVsbCkgJiYgbWFwW3R5cGVvZiB4XSkgfHwgZmFsc2U7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vaXMtaW1wbGVtZW50ZWQnKSgpXG5cdD8gT2JqZWN0LmtleXNcblx0OiByZXF1aXJlKCcuL3NoaW0nKTtcbiIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdHRyeSB7XG5cdFx0T2JqZWN0LmtleXMoJ3ByaW1pdGl2ZScpO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfVxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGtleXMgPSBPYmplY3Qua2V5cztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqZWN0KSB7XG5cdHJldHVybiBrZXlzKG9iamVjdCA9PSBudWxsID8gb2JqZWN0IDogT2JqZWN0KG9iamVjdCkpO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGNhbGxhYmxlID0gcmVxdWlyZSgnLi92YWxpZC1jYWxsYWJsZScpXG4gICwgZm9yRWFjaCAgPSByZXF1aXJlKCcuL2Zvci1lYWNoJylcblxuICAsIGNhbGwgPSBGdW5jdGlvbi5wcm90b3R5cGUuY2FsbDtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqLCBjYi8qLCB0aGlzQXJnKi8pIHtcblx0dmFyIG8gPSB7fSwgdGhpc0FyZyA9IGFyZ3VtZW50c1syXTtcblx0Y2FsbGFibGUoY2IpO1xuXHRmb3JFYWNoKG9iaiwgZnVuY3Rpb24gKHZhbHVlLCBrZXksIG9iaiwgaW5kZXgpIHtcblx0XHRvW2tleV0gPSBjYWxsLmNhbGwoY2IsIHRoaXNBcmcsIHZhbHVlLCBrZXksIG9iaiwgaW5kZXgpO1xuXHR9KTtcblx0cmV0dXJuIG87XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgZm9yRWFjaCA9IEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLCBjcmVhdGUgPSBPYmplY3QuY3JlYXRlO1xuXG52YXIgcHJvY2VzcyA9IGZ1bmN0aW9uIChzcmMsIG9iaikge1xuXHR2YXIga2V5O1xuXHRmb3IgKGtleSBpbiBzcmMpIG9ialtrZXldID0gc3JjW2tleV07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvcHRpb25zLyosIOKApm9wdGlvbnMqLykge1xuXHR2YXIgcmVzdWx0ID0gY3JlYXRlKG51bGwpO1xuXHRmb3JFYWNoLmNhbGwoYXJndW1lbnRzLCBmdW5jdGlvbiAob3B0aW9ucykge1xuXHRcdGlmIChvcHRpb25zID09IG51bGwpIHJldHVybjtcblx0XHRwcm9jZXNzKE9iamVjdChvcHRpb25zKSwgcmVzdWx0KTtcblx0fSk7XG5cdHJldHVybiByZXN1bHQ7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vaXMtaW1wbGVtZW50ZWQnKSgpXG5cdD8gT2JqZWN0LnNldFByb3RvdHlwZU9mXG5cdDogcmVxdWlyZSgnLi9zaGltJyk7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBjcmVhdGUgPSBPYmplY3QuY3JlYXRlLCBnZXRQcm90b3R5cGVPZiA9IE9iamVjdC5nZXRQcm90b3R5cGVPZlxuICAsIHggPSB7fTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoLypjdXN0b21DcmVhdGUqLykge1xuXHR2YXIgc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2Zcblx0ICAsIGN1c3RvbUNyZWF0ZSA9IGFyZ3VtZW50c1swXSB8fCBjcmVhdGU7XG5cdGlmICh0eXBlb2Ygc2V0UHJvdG90eXBlT2YgIT09ICdmdW5jdGlvbicpIHJldHVybiBmYWxzZTtcblx0cmV0dXJuIGdldFByb3RvdHlwZU9mKHNldFByb3RvdHlwZU9mKGN1c3RvbUNyZWF0ZShudWxsKSwgeCkpID09PSB4O1xufTtcbiIsIi8vIEJpZyB0aGFua3MgdG8gQFdlYlJlZmxlY3Rpb24gZm9yIHNvcnRpbmcgdGhpcyBvdXRcbi8vIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL1dlYlJlZmxlY3Rpb24vNTU5MzU1NFxuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpc09iamVjdCAgICAgID0gcmVxdWlyZSgnLi4vaXMtb2JqZWN0JylcbiAgLCB2YWx1ZSAgICAgICAgID0gcmVxdWlyZSgnLi4vdmFsaWQtdmFsdWUnKVxuXG4gICwgaXNQcm90b3R5cGVPZiA9IE9iamVjdC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZlxuICAsIGRlZmluZVByb3BlcnR5ID0gT2JqZWN0LmRlZmluZVByb3BlcnR5XG4gICwgbnVsbERlc2MgPSB7IGNvbmZpZ3VyYWJsZTogdHJ1ZSwgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLFxuXHRcdHZhbHVlOiB1bmRlZmluZWQgfVxuICAsIHZhbGlkYXRlO1xuXG52YWxpZGF0ZSA9IGZ1bmN0aW9uIChvYmosIHByb3RvdHlwZSkge1xuXHR2YWx1ZShvYmopO1xuXHRpZiAoKHByb3RvdHlwZSA9PT0gbnVsbCkgfHwgaXNPYmplY3QocHJvdG90eXBlKSkgcmV0dXJuIG9iajtcblx0dGhyb3cgbmV3IFR5cGVFcnJvcignUHJvdG90eXBlIG11c3QgYmUgbnVsbCBvciBhbiBvYmplY3QnKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uIChzdGF0dXMpIHtcblx0dmFyIGZuLCBzZXQ7XG5cdGlmICghc3RhdHVzKSByZXR1cm4gbnVsbDtcblx0aWYgKHN0YXR1cy5sZXZlbCA9PT0gMikge1xuXHRcdGlmIChzdGF0dXMuc2V0KSB7XG5cdFx0XHRzZXQgPSBzdGF0dXMuc2V0O1xuXHRcdFx0Zm4gPSBmdW5jdGlvbiAob2JqLCBwcm90b3R5cGUpIHtcblx0XHRcdFx0c2V0LmNhbGwodmFsaWRhdGUob2JqLCBwcm90b3R5cGUpLCBwcm90b3R5cGUpO1xuXHRcdFx0XHRyZXR1cm4gb2JqO1xuXHRcdFx0fTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Zm4gPSBmdW5jdGlvbiAob2JqLCBwcm90b3R5cGUpIHtcblx0XHRcdFx0dmFsaWRhdGUob2JqLCBwcm90b3R5cGUpLl9fcHJvdG9fXyA9IHByb3RvdHlwZTtcblx0XHRcdFx0cmV0dXJuIG9iajtcblx0XHRcdH07XG5cdFx0fVxuXHR9IGVsc2Uge1xuXHRcdGZuID0gZnVuY3Rpb24gc2VsZihvYmosIHByb3RvdHlwZSkge1xuXHRcdFx0dmFyIGlzTnVsbEJhc2U7XG5cdFx0XHR2YWxpZGF0ZShvYmosIHByb3RvdHlwZSk7XG5cdFx0XHRpc051bGxCYXNlID0gaXNQcm90b3R5cGVPZi5jYWxsKHNlbGYubnVsbFBvbHlmaWxsLCBvYmopO1xuXHRcdFx0aWYgKGlzTnVsbEJhc2UpIGRlbGV0ZSBzZWxmLm51bGxQb2x5ZmlsbC5fX3Byb3RvX187XG5cdFx0XHRpZiAocHJvdG90eXBlID09PSBudWxsKSBwcm90b3R5cGUgPSBzZWxmLm51bGxQb2x5ZmlsbDtcblx0XHRcdG9iai5fX3Byb3RvX18gPSBwcm90b3R5cGU7XG5cdFx0XHRpZiAoaXNOdWxsQmFzZSkgZGVmaW5lUHJvcGVydHkoc2VsZi5udWxsUG9seWZpbGwsICdfX3Byb3RvX18nLCBudWxsRGVzYyk7XG5cdFx0XHRyZXR1cm4gb2JqO1xuXHRcdH07XG5cdH1cblx0cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbiwgJ2xldmVsJywgeyBjb25maWd1cmFibGU6IGZhbHNlLFxuXHRcdGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogZmFsc2UsIHZhbHVlOiBzdGF0dXMubGV2ZWwgfSk7XG59KChmdW5jdGlvbiAoKSB7XG5cdHZhciB4ID0gT2JqZWN0LmNyZWF0ZShudWxsKSwgeSA9IHt9LCBzZXRcblx0ICAsIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE9iamVjdC5wcm90b3R5cGUsICdfX3Byb3RvX18nKTtcblxuXHRpZiAoZGVzYykge1xuXHRcdHRyeSB7XG5cdFx0XHRzZXQgPSBkZXNjLnNldDsgLy8gT3BlcmEgY3Jhc2hlcyBhdCB0aGlzIHBvaW50XG5cdFx0XHRzZXQuY2FsbCh4LCB5KTtcblx0XHR9IGNhdGNoIChpZ25vcmUpIHsgfVxuXHRcdGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoeCkgPT09IHkpIHJldHVybiB7IHNldDogc2V0LCBsZXZlbDogMiB9O1xuXHR9XG5cblx0eC5fX3Byb3RvX18gPSB5O1xuXHRpZiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKHgpID09PSB5KSByZXR1cm4geyBsZXZlbDogMiB9O1xuXG5cdHggPSB7fTtcblx0eC5fX3Byb3RvX18gPSB5O1xuXHRpZiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKHgpID09PSB5KSByZXR1cm4geyBsZXZlbDogMSB9O1xuXG5cdHJldHVybiBmYWxzZTtcbn0oKSkpKTtcblxucmVxdWlyZSgnLi4vY3JlYXRlJyk7XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGZuKSB7XG5cdGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIHRocm93IG5ldyBUeXBlRXJyb3IoZm4gKyBcIiBpcyBub3QgYSBmdW5jdGlvblwiKTtcblx0cmV0dXJuIGZuO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9pcy1vYmplY3QnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0aWYgKCFpc09iamVjdCh2YWx1ZSkpIHRocm93IG5ldyBUeXBlRXJyb3IodmFsdWUgKyBcIiBpcyBub3QgYW4gT2JqZWN0XCIpO1xuXHRyZXR1cm4gdmFsdWU7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHRpZiAodmFsdWUgPT0gbnVsbCkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB1c2UgbnVsbCBvciB1bmRlZmluZWRcIik7XG5cdHJldHVybiB2YWx1ZTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9pcy1pbXBsZW1lbnRlZCcpKClcblx0PyBTdHJpbmcucHJvdG90eXBlLmNvbnRhaW5zXG5cdDogcmVxdWlyZSgnLi9zaGltJyk7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBzdHIgPSAncmF6ZHdhdHJ6eSc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHRpZiAodHlwZW9mIHN0ci5jb250YWlucyAhPT0gJ2Z1bmN0aW9uJykgcmV0dXJuIGZhbHNlO1xuXHRyZXR1cm4gKChzdHIuY29udGFpbnMoJ2R3YScpID09PSB0cnVlKSAmJiAoc3RyLmNvbnRhaW5zKCdmb28nKSA9PT0gZmFsc2UpKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBpbmRleE9mID0gU3RyaW5nLnByb3RvdHlwZS5pbmRleE9mO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChzZWFyY2hTdHJpbmcvKiwgcG9zaXRpb24qLykge1xuXHRyZXR1cm4gaW5kZXhPZi5jYWxsKHRoaXMsIHNlYXJjaFN0cmluZywgYXJndW1lbnRzWzFdKSA+IC0xO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ1xuXG4gICwgaWQgPSB0b1N0cmluZy5jYWxsKCcnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoeCkge1xuXHRyZXR1cm4gKHR5cGVvZiB4ID09PSAnc3RyaW5nJykgfHwgKHggJiYgKHR5cGVvZiB4ID09PSAnb2JqZWN0JykgJiZcblx0XHQoKHggaW5zdGFuY2VvZiBTdHJpbmcpIHx8ICh0b1N0cmluZy5jYWxsKHgpID09PSBpZCkpKSB8fCBmYWxzZTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBnZW5lcmF0ZWQgPSBPYmplY3QuY3JlYXRlKG51bGwpXG5cbiAgLCByYW5kb20gPSBNYXRoLnJhbmRvbTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdHZhciBzdHI7XG5cdGRvIHsgc3RyID0gcmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIpOyB9IHdoaWxlIChnZW5lcmF0ZWRbc3RyXSk7XG5cdHJldHVybiBzdHI7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgc2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKCdlczUtZXh0L29iamVjdC9zZXQtcHJvdG90eXBlLW9mJylcbiAgLCBjb250YWlucyAgICAgICA9IHJlcXVpcmUoJ2VzNS1leHQvc3RyaW5nLyMvY29udGFpbnMnKVxuICAsIGQgICAgICAgICAgICAgID0gcmVxdWlyZSgnZCcpXG4gICwgSXRlcmF0b3IgICAgICAgPSByZXF1aXJlKCcuLycpXG5cbiAgLCBkZWZpbmVQcm9wZXJ0eSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eVxuICAsIEFycmF5SXRlcmF0b3I7XG5cbkFycmF5SXRlcmF0b3IgPSBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcnIsIGtpbmQpIHtcblx0aWYgKCEodGhpcyBpbnN0YW5jZW9mIEFycmF5SXRlcmF0b3IpKSByZXR1cm4gbmV3IEFycmF5SXRlcmF0b3IoYXJyLCBraW5kKTtcblx0SXRlcmF0b3IuY2FsbCh0aGlzLCBhcnIpO1xuXHRpZiAoIWtpbmQpIGtpbmQgPSAndmFsdWUnO1xuXHRlbHNlIGlmIChjb250YWlucy5jYWxsKGtpbmQsICdrZXkrdmFsdWUnKSkga2luZCA9ICdrZXkrdmFsdWUnO1xuXHRlbHNlIGlmIChjb250YWlucy5jYWxsKGtpbmQsICdrZXknKSkga2luZCA9ICdrZXknO1xuXHRlbHNlIGtpbmQgPSAndmFsdWUnO1xuXHRkZWZpbmVQcm9wZXJ0eSh0aGlzLCAnX19raW5kX18nLCBkKCcnLCBraW5kKSk7XG59O1xuaWYgKHNldFByb3RvdHlwZU9mKSBzZXRQcm90b3R5cGVPZihBcnJheUl0ZXJhdG9yLCBJdGVyYXRvcik7XG5cbkFycmF5SXRlcmF0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShJdGVyYXRvci5wcm90b3R5cGUsIHtcblx0Y29uc3RydWN0b3I6IGQoQXJyYXlJdGVyYXRvciksXG5cdF9yZXNvbHZlOiBkKGZ1bmN0aW9uIChpKSB7XG5cdFx0aWYgKHRoaXMuX19raW5kX18gPT09ICd2YWx1ZScpIHJldHVybiB0aGlzLl9fbGlzdF9fW2ldO1xuXHRcdGlmICh0aGlzLl9fa2luZF9fID09PSAna2V5K3ZhbHVlJykgcmV0dXJuIFtpLCB0aGlzLl9fbGlzdF9fW2ldXTtcblx0XHRyZXR1cm4gaTtcblx0fSksXG5cdHRvU3RyaW5nOiBkKGZ1bmN0aW9uICgpIHsgcmV0dXJuICdbb2JqZWN0IEFycmF5IEl0ZXJhdG9yXSc7IH0pXG59KTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGlzQXJndW1lbnRzID0gcmVxdWlyZSgnZXM1LWV4dC9mdW5jdGlvbi9pcy1hcmd1bWVudHMnKVxuICAsIGNhbGxhYmxlICAgID0gcmVxdWlyZSgnZXM1LWV4dC9vYmplY3QvdmFsaWQtY2FsbGFibGUnKVxuICAsIGlzU3RyaW5nICAgID0gcmVxdWlyZSgnZXM1LWV4dC9zdHJpbmcvaXMtc3RyaW5nJylcbiAgLCBnZXQgICAgICAgICA9IHJlcXVpcmUoJy4vZ2V0JylcblxuICAsIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5LCBjYWxsID0gRnVuY3Rpb24ucHJvdG90eXBlLmNhbGxcbiAgLCBzb21lID0gQXJyYXkucHJvdG90eXBlLnNvbWU7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0ZXJhYmxlLCBjYi8qLCB0aGlzQXJnKi8pIHtcblx0dmFyIG1vZGUsIHRoaXNBcmcgPSBhcmd1bWVudHNbMl0sIHJlc3VsdCwgZG9CcmVhaywgYnJva2VuLCBpLCBsLCBjaGFyLCBjb2RlO1xuXHRpZiAoaXNBcnJheShpdGVyYWJsZSkgfHwgaXNBcmd1bWVudHMoaXRlcmFibGUpKSBtb2RlID0gJ2FycmF5Jztcblx0ZWxzZSBpZiAoaXNTdHJpbmcoaXRlcmFibGUpKSBtb2RlID0gJ3N0cmluZyc7XG5cdGVsc2UgaXRlcmFibGUgPSBnZXQoaXRlcmFibGUpO1xuXG5cdGNhbGxhYmxlKGNiKTtcblx0ZG9CcmVhayA9IGZ1bmN0aW9uICgpIHsgYnJva2VuID0gdHJ1ZTsgfTtcblx0aWYgKG1vZGUgPT09ICdhcnJheScpIHtcblx0XHRzb21lLmNhbGwoaXRlcmFibGUsIGZ1bmN0aW9uICh2YWx1ZSkge1xuXHRcdFx0Y2FsbC5jYWxsKGNiLCB0aGlzQXJnLCB2YWx1ZSwgZG9CcmVhayk7XG5cdFx0XHRpZiAoYnJva2VuKSByZXR1cm4gdHJ1ZTtcblx0XHR9KTtcblx0XHRyZXR1cm47XG5cdH1cblx0aWYgKG1vZGUgPT09ICdzdHJpbmcnKSB7XG5cdFx0bCA9IGl0ZXJhYmxlLmxlbmd0aDtcblx0XHRmb3IgKGkgPSAwOyBpIDwgbDsgKytpKSB7XG5cdFx0XHRjaGFyID0gaXRlcmFibGVbaV07XG5cdFx0XHRpZiAoKGkgKyAxKSA8IGwpIHtcblx0XHRcdFx0Y29kZSA9IGNoYXIuY2hhckNvZGVBdCgwKTtcblx0XHRcdFx0aWYgKChjb2RlID49IDB4RDgwMCkgJiYgKGNvZGUgPD0gMHhEQkZGKSkgY2hhciArPSBpdGVyYWJsZVsrK2ldO1xuXHRcdFx0fVxuXHRcdFx0Y2FsbC5jYWxsKGNiLCB0aGlzQXJnLCBjaGFyLCBkb0JyZWFrKTtcblx0XHRcdGlmIChicm9rZW4pIGJyZWFrO1xuXHRcdH1cblx0XHRyZXR1cm47XG5cdH1cblx0cmVzdWx0ID0gaXRlcmFibGUubmV4dCgpO1xuXG5cdHdoaWxlICghcmVzdWx0LmRvbmUpIHtcblx0XHRjYWxsLmNhbGwoY2IsIHRoaXNBcmcsIHJlc3VsdC52YWx1ZSwgZG9CcmVhayk7XG5cdFx0aWYgKGJyb2tlbikgcmV0dXJuO1xuXHRcdHJlc3VsdCA9IGl0ZXJhYmxlLm5leHQoKTtcblx0fVxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGlzQXJndW1lbnRzICAgID0gcmVxdWlyZSgnZXM1LWV4dC9mdW5jdGlvbi9pcy1hcmd1bWVudHMnKVxuICAsIGlzU3RyaW5nICAgICAgID0gcmVxdWlyZSgnZXM1LWV4dC9zdHJpbmcvaXMtc3RyaW5nJylcbiAgLCBBcnJheUl0ZXJhdG9yICA9IHJlcXVpcmUoJy4vYXJyYXknKVxuICAsIFN0cmluZ0l0ZXJhdG9yID0gcmVxdWlyZSgnLi9zdHJpbmcnKVxuICAsIGl0ZXJhYmxlICAgICAgID0gcmVxdWlyZSgnLi92YWxpZC1pdGVyYWJsZScpXG4gICwgaXRlcmF0b3JTeW1ib2wgPSByZXF1aXJlKCdlczYtc3ltYm9sJykuaXRlcmF0b3I7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iaikge1xuXHRpZiAodHlwZW9mIGl0ZXJhYmxlKG9iailbaXRlcmF0b3JTeW1ib2xdID09PSAnZnVuY3Rpb24nKSByZXR1cm4gb2JqW2l0ZXJhdG9yU3ltYm9sXSgpO1xuXHRpZiAoaXNBcmd1bWVudHMob2JqKSkgcmV0dXJuIG5ldyBBcnJheUl0ZXJhdG9yKG9iaik7XG5cdGlmIChpc1N0cmluZyhvYmopKSByZXR1cm4gbmV3IFN0cmluZ0l0ZXJhdG9yKG9iaik7XG5cdHJldHVybiBuZXcgQXJyYXlJdGVyYXRvcihvYmopO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGNsZWFyICAgID0gcmVxdWlyZSgnZXM1LWV4dC9hcnJheS8jL2NsZWFyJylcbiAgLCBhc3NpZ24gICA9IHJlcXVpcmUoJ2VzNS1leHQvb2JqZWN0L2Fzc2lnbicpXG4gICwgY2FsbGFibGUgPSByZXF1aXJlKCdlczUtZXh0L29iamVjdC92YWxpZC1jYWxsYWJsZScpXG4gICwgdmFsdWUgICAgPSByZXF1aXJlKCdlczUtZXh0L29iamVjdC92YWxpZC12YWx1ZScpXG4gICwgZCAgICAgICAgPSByZXF1aXJlKCdkJylcbiAgLCBhdXRvQmluZCA9IHJlcXVpcmUoJ2QvYXV0by1iaW5kJylcbiAgLCBTeW1ib2wgICA9IHJlcXVpcmUoJ2VzNi1zeW1ib2wnKVxuXG4gICwgZGVmaW5lUHJvcGVydHkgPSBPYmplY3QuZGVmaW5lUHJvcGVydHlcbiAgLCBkZWZpbmVQcm9wZXJ0aWVzID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXNcbiAgLCBJdGVyYXRvcjtcblxubW9kdWxlLmV4cG9ydHMgPSBJdGVyYXRvciA9IGZ1bmN0aW9uIChsaXN0LCBjb250ZXh0KSB7XG5cdGlmICghKHRoaXMgaW5zdGFuY2VvZiBJdGVyYXRvcikpIHJldHVybiBuZXcgSXRlcmF0b3IobGlzdCwgY29udGV4dCk7XG5cdGRlZmluZVByb3BlcnRpZXModGhpcywge1xuXHRcdF9fbGlzdF9fOiBkKCd3JywgdmFsdWUobGlzdCkpLFxuXHRcdF9fY29udGV4dF9fOiBkKCd3JywgY29udGV4dCksXG5cdFx0X19uZXh0SW5kZXhfXzogZCgndycsIDApXG5cdH0pO1xuXHRpZiAoIWNvbnRleHQpIHJldHVybjtcblx0Y2FsbGFibGUoY29udGV4dC5vbik7XG5cdGNvbnRleHQub24oJ19hZGQnLCB0aGlzLl9vbkFkZCk7XG5cdGNvbnRleHQub24oJ19kZWxldGUnLCB0aGlzLl9vbkRlbGV0ZSk7XG5cdGNvbnRleHQub24oJ19jbGVhcicsIHRoaXMuX29uQ2xlYXIpO1xufTtcblxuZGVmaW5lUHJvcGVydGllcyhJdGVyYXRvci5wcm90b3R5cGUsIGFzc2lnbih7XG5cdGNvbnN0cnVjdG9yOiBkKEl0ZXJhdG9yKSxcblx0X25leHQ6IGQoZnVuY3Rpb24gKCkge1xuXHRcdHZhciBpO1xuXHRcdGlmICghdGhpcy5fX2xpc3RfXykgcmV0dXJuO1xuXHRcdGlmICh0aGlzLl9fcmVkb19fKSB7XG5cdFx0XHRpID0gdGhpcy5fX3JlZG9fXy5zaGlmdCgpO1xuXHRcdFx0aWYgKGkgIT09IHVuZGVmaW5lZCkgcmV0dXJuIGk7XG5cdFx0fVxuXHRcdGlmICh0aGlzLl9fbmV4dEluZGV4X18gPCB0aGlzLl9fbGlzdF9fLmxlbmd0aCkgcmV0dXJuIHRoaXMuX19uZXh0SW5kZXhfXysrO1xuXHRcdHRoaXMuX3VuQmluZCgpO1xuXHR9KSxcblx0bmV4dDogZChmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9jcmVhdGVSZXN1bHQodGhpcy5fbmV4dCgpKTsgfSksXG5cdF9jcmVhdGVSZXN1bHQ6IGQoZnVuY3Rpb24gKGkpIHtcblx0XHRpZiAoaSA9PT0gdW5kZWZpbmVkKSByZXR1cm4geyBkb25lOiB0cnVlLCB2YWx1ZTogdW5kZWZpbmVkIH07XG5cdFx0cmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiB0aGlzLl9yZXNvbHZlKGkpIH07XG5cdH0pLFxuXHRfcmVzb2x2ZTogZChmdW5jdGlvbiAoaSkgeyByZXR1cm4gdGhpcy5fX2xpc3RfX1tpXTsgfSksXG5cdF91bkJpbmQ6IGQoZnVuY3Rpb24gKCkge1xuXHRcdHRoaXMuX19saXN0X18gPSBudWxsO1xuXHRcdGRlbGV0ZSB0aGlzLl9fcmVkb19fO1xuXHRcdGlmICghdGhpcy5fX2NvbnRleHRfXykgcmV0dXJuO1xuXHRcdHRoaXMuX19jb250ZXh0X18ub2ZmKCdfYWRkJywgdGhpcy5fb25BZGQpO1xuXHRcdHRoaXMuX19jb250ZXh0X18ub2ZmKCdfZGVsZXRlJywgdGhpcy5fb25EZWxldGUpO1xuXHRcdHRoaXMuX19jb250ZXh0X18ub2ZmKCdfY2xlYXInLCB0aGlzLl9vbkNsZWFyKTtcblx0XHR0aGlzLl9fY29udGV4dF9fID0gbnVsbDtcblx0fSksXG5cdHRvU3RyaW5nOiBkKGZ1bmN0aW9uICgpIHsgcmV0dXJuICdbb2JqZWN0IEl0ZXJhdG9yXSc7IH0pXG59LCBhdXRvQmluZCh7XG5cdF9vbkFkZDogZChmdW5jdGlvbiAoaW5kZXgpIHtcblx0XHRpZiAoaW5kZXggPj0gdGhpcy5fX25leHRJbmRleF9fKSByZXR1cm47XG5cdFx0Kyt0aGlzLl9fbmV4dEluZGV4X187XG5cdFx0aWYgKCF0aGlzLl9fcmVkb19fKSB7XG5cdFx0XHRkZWZpbmVQcm9wZXJ0eSh0aGlzLCAnX19yZWRvX18nLCBkKCdjJywgW2luZGV4XSkpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR0aGlzLl9fcmVkb19fLmZvckVhY2goZnVuY3Rpb24gKHJlZG8sIGkpIHtcblx0XHRcdGlmIChyZWRvID49IGluZGV4KSB0aGlzLl9fcmVkb19fW2ldID0gKytyZWRvO1xuXHRcdH0sIHRoaXMpO1xuXHRcdHRoaXMuX19yZWRvX18ucHVzaChpbmRleCk7XG5cdH0pLFxuXHRfb25EZWxldGU6IGQoZnVuY3Rpb24gKGluZGV4KSB7XG5cdFx0dmFyIGk7XG5cdFx0aWYgKGluZGV4ID49IHRoaXMuX19uZXh0SW5kZXhfXykgcmV0dXJuO1xuXHRcdC0tdGhpcy5fX25leHRJbmRleF9fO1xuXHRcdGlmICghdGhpcy5fX3JlZG9fXykgcmV0dXJuO1xuXHRcdGkgPSB0aGlzLl9fcmVkb19fLmluZGV4T2YoaW5kZXgpO1xuXHRcdGlmIChpICE9PSAtMSkgdGhpcy5fX3JlZG9fXy5zcGxpY2UoaSwgMSk7XG5cdFx0dGhpcy5fX3JlZG9fXy5mb3JFYWNoKGZ1bmN0aW9uIChyZWRvLCBpKSB7XG5cdFx0XHRpZiAocmVkbyA+IGluZGV4KSB0aGlzLl9fcmVkb19fW2ldID0gLS1yZWRvO1xuXHRcdH0sIHRoaXMpO1xuXHR9KSxcblx0X29uQ2xlYXI6IGQoZnVuY3Rpb24gKCkge1xuXHRcdGlmICh0aGlzLl9fcmVkb19fKSBjbGVhci5jYWxsKHRoaXMuX19yZWRvX18pO1xuXHRcdHRoaXMuX19uZXh0SW5kZXhfXyA9IDA7XG5cdH0pXG59KSkpO1xuXG5kZWZpbmVQcm9wZXJ0eShJdGVyYXRvci5wcm90b3R5cGUsIFN5bWJvbC5pdGVyYXRvciwgZChmdW5jdGlvbiAoKSB7XG5cdHJldHVybiB0aGlzO1xufSkpO1xuZGVmaW5lUHJvcGVydHkoSXRlcmF0b3IucHJvdG90eXBlLCBTeW1ib2wudG9TdHJpbmdUYWcsIGQoJycsICdJdGVyYXRvcicpKTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGlzQXJndW1lbnRzICAgID0gcmVxdWlyZSgnZXM1LWV4dC9mdW5jdGlvbi9pcy1hcmd1bWVudHMnKVxuICAsIGlzU3RyaW5nICAgICAgID0gcmVxdWlyZSgnZXM1LWV4dC9zdHJpbmcvaXMtc3RyaW5nJylcbiAgLCBpdGVyYXRvclN5bWJvbCA9IHJlcXVpcmUoJ2VzNi1zeW1ib2wnKS5pdGVyYXRvclxuXG4gICwgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cdGlmIChpc0FycmF5KHZhbHVlKSkgcmV0dXJuIHRydWU7XG5cdGlmIChpc1N0cmluZyh2YWx1ZSkpIHJldHVybiB0cnVlO1xuXHRpZiAoaXNBcmd1bWVudHModmFsdWUpKSByZXR1cm4gdHJ1ZTtcblx0cmV0dXJuICh0eXBlb2YgdmFsdWVbaXRlcmF0b3JTeW1ib2xdID09PSAnZnVuY3Rpb24nKTtcbn07XG4iLCIvLyBUaGFua3MgQG1hdGhpYXNieW5lbnNcbi8vIGh0dHA6Ly9tYXRoaWFzYnluZW5zLmJlL25vdGVzL2phdmFzY3JpcHQtdW5pY29kZSNpdGVyYXRpbmctb3Zlci1zeW1ib2xzXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIHNldFByb3RvdHlwZU9mID0gcmVxdWlyZSgnZXM1LWV4dC9vYmplY3Qvc2V0LXByb3RvdHlwZS1vZicpXG4gICwgZCAgICAgICAgICAgICAgPSByZXF1aXJlKCdkJylcbiAgLCBJdGVyYXRvciAgICAgICA9IHJlcXVpcmUoJy4vJylcblxuICAsIGRlZmluZVByb3BlcnR5ID0gT2JqZWN0LmRlZmluZVByb3BlcnR5XG4gICwgU3RyaW5nSXRlcmF0b3I7XG5cblN0cmluZ0l0ZXJhdG9yID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoc3RyKSB7XG5cdGlmICghKHRoaXMgaW5zdGFuY2VvZiBTdHJpbmdJdGVyYXRvcikpIHJldHVybiBuZXcgU3RyaW5nSXRlcmF0b3Ioc3RyKTtcblx0c3RyID0gU3RyaW5nKHN0cik7XG5cdEl0ZXJhdG9yLmNhbGwodGhpcywgc3RyKTtcblx0ZGVmaW5lUHJvcGVydHkodGhpcywgJ19fbGVuZ3RoX18nLCBkKCcnLCBzdHIubGVuZ3RoKSk7XG5cbn07XG5pZiAoc2V0UHJvdG90eXBlT2YpIHNldFByb3RvdHlwZU9mKFN0cmluZ0l0ZXJhdG9yLCBJdGVyYXRvcik7XG5cblN0cmluZ0l0ZXJhdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoSXRlcmF0b3IucHJvdG90eXBlLCB7XG5cdGNvbnN0cnVjdG9yOiBkKFN0cmluZ0l0ZXJhdG9yKSxcblx0X25leHQ6IGQoZnVuY3Rpb24gKCkge1xuXHRcdGlmICghdGhpcy5fX2xpc3RfXykgcmV0dXJuO1xuXHRcdGlmICh0aGlzLl9fbmV4dEluZGV4X18gPCB0aGlzLl9fbGVuZ3RoX18pIHJldHVybiB0aGlzLl9fbmV4dEluZGV4X18rKztcblx0XHR0aGlzLl91bkJpbmQoKTtcblx0fSksXG5cdF9yZXNvbHZlOiBkKGZ1bmN0aW9uIChpKSB7XG5cdFx0dmFyIGNoYXIgPSB0aGlzLl9fbGlzdF9fW2ldLCBjb2RlO1xuXHRcdGlmICh0aGlzLl9fbmV4dEluZGV4X18gPT09IHRoaXMuX19sZW5ndGhfXykgcmV0dXJuIGNoYXI7XG5cdFx0Y29kZSA9IGNoYXIuY2hhckNvZGVBdCgwKTtcblx0XHRpZiAoKGNvZGUgPj0gMHhEODAwKSAmJiAoY29kZSA8PSAweERCRkYpKSByZXR1cm4gY2hhciArIHRoaXMuX19saXN0X19bdGhpcy5fX25leHRJbmRleF9fKytdO1xuXHRcdHJldHVybiBjaGFyO1xuXHR9KSxcblx0dG9TdHJpbmc6IGQoZnVuY3Rpb24gKCkgeyByZXR1cm4gJ1tvYmplY3QgU3RyaW5nIEl0ZXJhdG9yXSc7IH0pXG59KTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGlzSXRlcmFibGUgPSByZXF1aXJlKCcuL2lzLWl0ZXJhYmxlJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdGlmICghaXNJdGVyYWJsZSh2YWx1ZSkpIHRocm93IG5ldyBUeXBlRXJyb3IodmFsdWUgKyBcIiBpcyBub3QgaXRlcmFibGVcIik7XG5cdHJldHVybiB2YWx1ZTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9pcy1pbXBsZW1lbnRlZCcpKCkgPyBTeW1ib2wgOiByZXF1aXJlKCcuL3BvbHlmaWxsJyk7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB2YWxpZFR5cGVzID0geyBvYmplY3Q6IHRydWUsIHN5bWJvbDogdHJ1ZSB9O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0dmFyIHN5bWJvbDtcblx0aWYgKHR5cGVvZiBTeW1ib2wgIT09ICdmdW5jdGlvbicpIHJldHVybiBmYWxzZTtcblx0c3ltYm9sID0gU3ltYm9sKCd0ZXN0IHN5bWJvbCcpO1xuXHR0cnkgeyBTdHJpbmcoc3ltYm9sKTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gZmFsc2U7IH1cblxuXHQvLyBSZXR1cm4gJ3RydWUnIGFsc28gZm9yIHBvbHlmaWxsc1xuXHRpZiAoIXZhbGlkVHlwZXNbdHlwZW9mIFN5bWJvbC5pdGVyYXRvcl0pIHJldHVybiBmYWxzZTtcblx0aWYgKCF2YWxpZFR5cGVzW3R5cGVvZiBTeW1ib2wudG9QcmltaXRpdmVdKSByZXR1cm4gZmFsc2U7XG5cdGlmICghdmFsaWRUeXBlc1t0eXBlb2YgU3ltYm9sLnRvU3RyaW5nVGFnXSkgcmV0dXJuIGZhbHNlO1xuXG5cdHJldHVybiB0cnVlO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoeCkge1xuXHRpZiAoIXgpIHJldHVybiBmYWxzZTtcblx0aWYgKHR5cGVvZiB4ID09PSAnc3ltYm9sJykgcmV0dXJuIHRydWU7XG5cdGlmICgheC5jb25zdHJ1Y3RvcikgcmV0dXJuIGZhbHNlO1xuXHRpZiAoeC5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnU3ltYm9sJykgcmV0dXJuIGZhbHNlO1xuXHRyZXR1cm4gKHhbeC5jb25zdHJ1Y3Rvci50b1N0cmluZ1RhZ10gPT09ICdTeW1ib2wnKTtcbn07XG4iLCIvLyBFUzIwMTUgU3ltYm9sIHBvbHlmaWxsIGZvciBlbnZpcm9ubWVudHMgdGhhdCBkbyBub3QgKG9yIHBhcnRpYWxseSkgc3VwcG9ydCBpdFxuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBkICAgICAgICAgICAgICA9IHJlcXVpcmUoJ2QnKVxuICAsIHZhbGlkYXRlU3ltYm9sID0gcmVxdWlyZSgnLi92YWxpZGF0ZS1zeW1ib2wnKVxuXG4gICwgY3JlYXRlID0gT2JqZWN0LmNyZWF0ZSwgZGVmaW5lUHJvcGVydGllcyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzXG4gICwgZGVmaW5lUHJvcGVydHkgPSBPYmplY3QuZGVmaW5lUHJvcGVydHksIG9ialByb3RvdHlwZSA9IE9iamVjdC5wcm90b3R5cGVcbiAgLCBOYXRpdmVTeW1ib2wsIFN5bWJvbFBvbHlmaWxsLCBIaWRkZW5TeW1ib2wsIGdsb2JhbFN5bWJvbHMgPSBjcmVhdGUobnVsbClcbiAgLCBpc05hdGl2ZVNhZmU7XG5cbmlmICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nKSB7XG5cdE5hdGl2ZVN5bWJvbCA9IFN5bWJvbDtcblx0dHJ5IHtcblx0XHRTdHJpbmcoTmF0aXZlU3ltYm9sKCkpO1xuXHRcdGlzTmF0aXZlU2FmZSA9IHRydWU7XG5cdH0gY2F0Y2ggKGlnbm9yZSkge31cbn1cblxudmFyIGdlbmVyYXRlTmFtZSA9IChmdW5jdGlvbiAoKSB7XG5cdHZhciBjcmVhdGVkID0gY3JlYXRlKG51bGwpO1xuXHRyZXR1cm4gZnVuY3Rpb24gKGRlc2MpIHtcblx0XHR2YXIgcG9zdGZpeCA9IDAsIG5hbWUsIGllMTFCdWdXb3JrYXJvdW5kO1xuXHRcdHdoaWxlIChjcmVhdGVkW2Rlc2MgKyAocG9zdGZpeCB8fCAnJyldKSArK3Bvc3RmaXg7XG5cdFx0ZGVzYyArPSAocG9zdGZpeCB8fCAnJyk7XG5cdFx0Y3JlYXRlZFtkZXNjXSA9IHRydWU7XG5cdFx0bmFtZSA9ICdAQCcgKyBkZXNjO1xuXHRcdGRlZmluZVByb3BlcnR5KG9ialByb3RvdHlwZSwgbmFtZSwgZC5ncyhudWxsLCBmdW5jdGlvbiAodmFsdWUpIHtcblx0XHRcdC8vIEZvciBJRTExIGlzc3VlIHNlZTpcblx0XHRcdC8vIGh0dHBzOi8vY29ubmVjdC5taWNyb3NvZnQuY29tL0lFL2ZlZWRiYWNrZGV0YWlsL3ZpZXcvMTkyODUwOC9cblx0XHRcdC8vICAgIGllMTEtYnJva2VuLWdldHRlcnMtb24tZG9tLW9iamVjdHNcblx0XHRcdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tZWRpa29vL2VzNi1zeW1ib2wvaXNzdWVzLzEyXG5cdFx0XHRpZiAoaWUxMUJ1Z1dvcmthcm91bmQpIHJldHVybjtcblx0XHRcdGllMTFCdWdXb3JrYXJvdW5kID0gdHJ1ZTtcblx0XHRcdGRlZmluZVByb3BlcnR5KHRoaXMsIG5hbWUsIGQodmFsdWUpKTtcblx0XHRcdGllMTFCdWdXb3JrYXJvdW5kID0gZmFsc2U7XG5cdFx0fSkpO1xuXHRcdHJldHVybiBuYW1lO1xuXHR9O1xufSgpKTtcblxuLy8gSW50ZXJuYWwgY29uc3RydWN0b3IgKG5vdCBvbmUgZXhwb3NlZCkgZm9yIGNyZWF0aW5nIFN5bWJvbCBpbnN0YW5jZXMuXG4vLyBUaGlzIG9uZSBpcyB1c2VkIHRvIGVuc3VyZSB0aGF0IGBzb21lU3ltYm9sIGluc3RhbmNlb2YgU3ltYm9sYCBhbHdheXMgcmV0dXJuIGZhbHNlXG5IaWRkZW5TeW1ib2wgPSBmdW5jdGlvbiBTeW1ib2woZGVzY3JpcHRpb24pIHtcblx0aWYgKHRoaXMgaW5zdGFuY2VvZiBIaWRkZW5TeW1ib2wpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1N5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvcicpO1xuXHRyZXR1cm4gU3ltYm9sUG9seWZpbGwoZGVzY3JpcHRpb24pO1xufTtcblxuLy8gRXhwb3NlZCBgU3ltYm9sYCBjb25zdHJ1Y3RvclxuLy8gKHJldHVybnMgaW5zdGFuY2VzIG9mIEhpZGRlblN5bWJvbClcbm1vZHVsZS5leHBvcnRzID0gU3ltYm9sUG9seWZpbGwgPSBmdW5jdGlvbiBTeW1ib2woZGVzY3JpcHRpb24pIHtcblx0dmFyIHN5bWJvbDtcblx0aWYgKHRoaXMgaW5zdGFuY2VvZiBTeW1ib2wpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1N5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvcicpO1xuXHRpZiAoaXNOYXRpdmVTYWZlKSByZXR1cm4gTmF0aXZlU3ltYm9sKGRlc2NyaXB0aW9uKTtcblx0c3ltYm9sID0gY3JlYXRlKEhpZGRlblN5bWJvbC5wcm90b3R5cGUpO1xuXHRkZXNjcmlwdGlvbiA9IChkZXNjcmlwdGlvbiA9PT0gdW5kZWZpbmVkID8gJycgOiBTdHJpbmcoZGVzY3JpcHRpb24pKTtcblx0cmV0dXJuIGRlZmluZVByb3BlcnRpZXMoc3ltYm9sLCB7XG5cdFx0X19kZXNjcmlwdGlvbl9fOiBkKCcnLCBkZXNjcmlwdGlvbiksXG5cdFx0X19uYW1lX186IGQoJycsIGdlbmVyYXRlTmFtZShkZXNjcmlwdGlvbikpXG5cdH0pO1xufTtcbmRlZmluZVByb3BlcnRpZXMoU3ltYm9sUG9seWZpbGwsIHtcblx0Zm9yOiBkKGZ1bmN0aW9uIChrZXkpIHtcblx0XHRpZiAoZ2xvYmFsU3ltYm9sc1trZXldKSByZXR1cm4gZ2xvYmFsU3ltYm9sc1trZXldO1xuXHRcdHJldHVybiAoZ2xvYmFsU3ltYm9sc1trZXldID0gU3ltYm9sUG9seWZpbGwoU3RyaW5nKGtleSkpKTtcblx0fSksXG5cdGtleUZvcjogZChmdW5jdGlvbiAocykge1xuXHRcdHZhciBrZXk7XG5cdFx0dmFsaWRhdGVTeW1ib2wocyk7XG5cdFx0Zm9yIChrZXkgaW4gZ2xvYmFsU3ltYm9scykgaWYgKGdsb2JhbFN5bWJvbHNba2V5XSA9PT0gcykgcmV0dXJuIGtleTtcblx0fSksXG5cblx0Ly8gVG8gZW5zdXJlIHByb3BlciBpbnRlcm9wZXJhYmlsaXR5IHdpdGggb3RoZXIgbmF0aXZlIGZ1bmN0aW9ucyAoZS5nLiBBcnJheS5mcm9tKVxuXHQvLyBmYWxsYmFjayB0byBldmVudHVhbCBuYXRpdmUgaW1wbGVtZW50YXRpb24gb2YgZ2l2ZW4gc3ltYm9sXG5cdGhhc0luc3RhbmNlOiBkKCcnLCAoTmF0aXZlU3ltYm9sICYmIE5hdGl2ZVN5bWJvbC5oYXNJbnN0YW5jZSkgfHwgU3ltYm9sUG9seWZpbGwoJ2hhc0luc3RhbmNlJykpLFxuXHRpc0NvbmNhdFNwcmVhZGFibGU6IGQoJycsIChOYXRpdmVTeW1ib2wgJiYgTmF0aXZlU3ltYm9sLmlzQ29uY2F0U3ByZWFkYWJsZSkgfHxcblx0XHRTeW1ib2xQb2x5ZmlsbCgnaXNDb25jYXRTcHJlYWRhYmxlJykpLFxuXHRpdGVyYXRvcjogZCgnJywgKE5hdGl2ZVN5bWJvbCAmJiBOYXRpdmVTeW1ib2wuaXRlcmF0b3IpIHx8IFN5bWJvbFBvbHlmaWxsKCdpdGVyYXRvcicpKSxcblx0bWF0Y2g6IGQoJycsIChOYXRpdmVTeW1ib2wgJiYgTmF0aXZlU3ltYm9sLm1hdGNoKSB8fCBTeW1ib2xQb2x5ZmlsbCgnbWF0Y2gnKSksXG5cdHJlcGxhY2U6IGQoJycsIChOYXRpdmVTeW1ib2wgJiYgTmF0aXZlU3ltYm9sLnJlcGxhY2UpIHx8IFN5bWJvbFBvbHlmaWxsKCdyZXBsYWNlJykpLFxuXHRzZWFyY2g6IGQoJycsIChOYXRpdmVTeW1ib2wgJiYgTmF0aXZlU3ltYm9sLnNlYXJjaCkgfHwgU3ltYm9sUG9seWZpbGwoJ3NlYXJjaCcpKSxcblx0c3BlY2llczogZCgnJywgKE5hdGl2ZVN5bWJvbCAmJiBOYXRpdmVTeW1ib2wuc3BlY2llcykgfHwgU3ltYm9sUG9seWZpbGwoJ3NwZWNpZXMnKSksXG5cdHNwbGl0OiBkKCcnLCAoTmF0aXZlU3ltYm9sICYmIE5hdGl2ZVN5bWJvbC5zcGxpdCkgfHwgU3ltYm9sUG9seWZpbGwoJ3NwbGl0JykpLFxuXHR0b1ByaW1pdGl2ZTogZCgnJywgKE5hdGl2ZVN5bWJvbCAmJiBOYXRpdmVTeW1ib2wudG9QcmltaXRpdmUpIHx8IFN5bWJvbFBvbHlmaWxsKCd0b1ByaW1pdGl2ZScpKSxcblx0dG9TdHJpbmdUYWc6IGQoJycsIChOYXRpdmVTeW1ib2wgJiYgTmF0aXZlU3ltYm9sLnRvU3RyaW5nVGFnKSB8fCBTeW1ib2xQb2x5ZmlsbCgndG9TdHJpbmdUYWcnKSksXG5cdHVuc2NvcGFibGVzOiBkKCcnLCAoTmF0aXZlU3ltYm9sICYmIE5hdGl2ZVN5bWJvbC51bnNjb3BhYmxlcykgfHwgU3ltYm9sUG9seWZpbGwoJ3Vuc2NvcGFibGVzJykpXG59KTtcblxuLy8gSW50ZXJuYWwgdHdlYWtzIGZvciByZWFsIHN5bWJvbCBwcm9kdWNlclxuZGVmaW5lUHJvcGVydGllcyhIaWRkZW5TeW1ib2wucHJvdG90eXBlLCB7XG5cdGNvbnN0cnVjdG9yOiBkKFN5bWJvbFBvbHlmaWxsKSxcblx0dG9TdHJpbmc6IGQoJycsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX19uYW1lX187IH0pXG59KTtcblxuLy8gUHJvcGVyIGltcGxlbWVudGF0aW9uIG9mIG1ldGhvZHMgZXhwb3NlZCBvbiBTeW1ib2wucHJvdG90eXBlXG4vLyBUaGV5IHdvbid0IGJlIGFjY2Vzc2libGUgb24gcHJvZHVjZWQgc3ltYm9sIGluc3RhbmNlcyBhcyB0aGV5IGRlcml2ZSBmcm9tIEhpZGRlblN5bWJvbC5wcm90b3R5cGVcbmRlZmluZVByb3BlcnRpZXMoU3ltYm9sUG9seWZpbGwucHJvdG90eXBlLCB7XG5cdHRvU3RyaW5nOiBkKGZ1bmN0aW9uICgpIHsgcmV0dXJuICdTeW1ib2wgKCcgKyB2YWxpZGF0ZVN5bWJvbCh0aGlzKS5fX2Rlc2NyaXB0aW9uX18gKyAnKSc7IH0pLFxuXHR2YWx1ZU9mOiBkKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHZhbGlkYXRlU3ltYm9sKHRoaXMpOyB9KVxufSk7XG5kZWZpbmVQcm9wZXJ0eShTeW1ib2xQb2x5ZmlsbC5wcm90b3R5cGUsIFN5bWJvbFBvbHlmaWxsLnRvUHJpbWl0aXZlLCBkKCcnLCBmdW5jdGlvbiAoKSB7XG5cdHZhciBzeW1ib2wgPSB2YWxpZGF0ZVN5bWJvbCh0aGlzKTtcblx0aWYgKHR5cGVvZiBzeW1ib2wgPT09ICdzeW1ib2wnKSByZXR1cm4gc3ltYm9sO1xuXHRyZXR1cm4gc3ltYm9sLnRvU3RyaW5nKCk7XG59KSk7XG5kZWZpbmVQcm9wZXJ0eShTeW1ib2xQb2x5ZmlsbC5wcm90b3R5cGUsIFN5bWJvbFBvbHlmaWxsLnRvU3RyaW5nVGFnLCBkKCdjJywgJ1N5bWJvbCcpKTtcblxuLy8gUHJvcGVyIGltcGxlbWVudGF0b24gb2YgdG9QcmltaXRpdmUgYW5kIHRvU3RyaW5nVGFnIGZvciByZXR1cm5lZCBzeW1ib2wgaW5zdGFuY2VzXG5kZWZpbmVQcm9wZXJ0eShIaWRkZW5TeW1ib2wucHJvdG90eXBlLCBTeW1ib2xQb2x5ZmlsbC50b1N0cmluZ1RhZyxcblx0ZCgnYycsIFN5bWJvbFBvbHlmaWxsLnByb3RvdHlwZVtTeW1ib2xQb2x5ZmlsbC50b1N0cmluZ1RhZ10pKTtcblxuLy8gTm90ZTogSXQncyBpbXBvcnRhbnQgdG8gZGVmaW5lIGB0b1ByaW1pdGl2ZWAgYXMgbGFzdCBvbmUsIGFzIHNvbWUgaW1wbGVtZW50YXRpb25zXG4vLyBpbXBsZW1lbnQgYHRvUHJpbWl0aXZlYCBuYXRpdmVseSB3aXRob3V0IGltcGxlbWVudGluZyBgdG9TdHJpbmdUYWdgIChvciBvdGhlciBzcGVjaWZpZWQgc3ltYm9scylcbi8vIEFuZCB0aGF0IG1heSBpbnZva2UgZXJyb3IgaW4gZGVmaW5pdGlvbiBmbG93OlxuLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vbWVkaWtvby9lczYtc3ltYm9sL2lzc3Vlcy8xMyNpc3N1ZWNvbW1lbnQtMTY0MTQ2MTQ5XG5kZWZpbmVQcm9wZXJ0eShIaWRkZW5TeW1ib2wucHJvdG90eXBlLCBTeW1ib2xQb2x5ZmlsbC50b1ByaW1pdGl2ZSxcblx0ZCgnYycsIFN5bWJvbFBvbHlmaWxsLnByb3RvdHlwZVtTeW1ib2xQb2x5ZmlsbC50b1ByaW1pdGl2ZV0pKTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGlzU3ltYm9sID0gcmVxdWlyZSgnLi9pcy1zeW1ib2wnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0aWYgKCFpc1N5bWJvbCh2YWx1ZSkpIHRocm93IG5ldyBUeXBlRXJyb3IodmFsdWUgKyBcIiBpcyBub3QgYSBzeW1ib2xcIik7XG5cdHJldHVybiB2YWx1ZTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9pcy1pbXBsZW1lbnRlZCcpKCkgPyBXZWFrTWFwIDogcmVxdWlyZSgnLi9wb2x5ZmlsbCcpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0dmFyIHdlYWtNYXAsIHg7XG5cdGlmICh0eXBlb2YgV2Vha01hcCAhPT0gJ2Z1bmN0aW9uJykgcmV0dXJuIGZhbHNlO1xuXHR0cnkge1xuXHRcdC8vIFdlYktpdCBkb2Vzbid0IHN1cHBvcnQgYXJndW1lbnRzIGFuZCBjcmFzaGVzXG5cdFx0d2Vha01hcCA9IG5ldyBXZWFrTWFwKFtbeCA9IHt9LCAnb25lJ10sIFt7fSwgJ3R3byddLCBbe30sICd0aHJlZSddXSk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0aWYgKFN0cmluZyh3ZWFrTWFwKSAhPT0gJ1tvYmplY3QgV2Vha01hcF0nKSByZXR1cm4gZmFsc2U7XG5cdGlmICh0eXBlb2Ygd2Vha01hcC5zZXQgIT09ICdmdW5jdGlvbicpIHJldHVybiBmYWxzZTtcblx0aWYgKHdlYWtNYXAuc2V0KHt9LCAxKSAhPT0gd2Vha01hcCkgcmV0dXJuIGZhbHNlO1xuXHRpZiAodHlwZW9mIHdlYWtNYXAuZGVsZXRlICE9PSAnZnVuY3Rpb24nKSByZXR1cm4gZmFsc2U7XG5cdGlmICh0eXBlb2Ygd2Vha01hcC5oYXMgIT09ICdmdW5jdGlvbicpIHJldHVybiBmYWxzZTtcblx0aWYgKHdlYWtNYXAuZ2V0KHgpICE9PSAnb25lJykgcmV0dXJuIGZhbHNlO1xuXG5cdHJldHVybiB0cnVlO1xufTtcbiIsIi8vIEV4cG9ydHMgdHJ1ZSBpZiBlbnZpcm9ubWVudCBwcm92aWRlcyBuYXRpdmUgYFdlYWtNYXBgIGltcGxlbWVudGF0aW9uLCB3aGF0ZXZlciB0aGF0IGlzLlxuXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uICgpIHtcblx0aWYgKHR5cGVvZiBXZWFrTWFwICE9PSAnZnVuY3Rpb24nKSByZXR1cm4gZmFsc2U7XG5cdHJldHVybiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG5ldyBXZWFrTWFwKCkpID09PSAnW29iamVjdCBXZWFrTWFwXScpO1xufSgpKTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHNldFByb3RvdHlwZU9mICAgID0gcmVxdWlyZSgnZXM1LWV4dC9vYmplY3Qvc2V0LXByb3RvdHlwZS1vZicpXG4gICwgb2JqZWN0ICAgICAgICAgICAgPSByZXF1aXJlKCdlczUtZXh0L29iamVjdC92YWxpZC1vYmplY3QnKVxuICAsIHZhbHVlICAgICAgICAgICAgID0gcmVxdWlyZSgnZXM1LWV4dC9vYmplY3QvdmFsaWQtdmFsdWUnKVxuICAsIHJhbmRvbVVuaXEgICAgICAgID0gcmVxdWlyZSgnZXM1LWV4dC9zdHJpbmcvcmFuZG9tLXVuaXEnKVxuICAsIGQgICAgICAgICAgICAgICAgID0gcmVxdWlyZSgnZCcpXG4gICwgZ2V0SXRlcmF0b3IgICAgICAgPSByZXF1aXJlKCdlczYtaXRlcmF0b3IvZ2V0JylcbiAgLCBmb3JPZiAgICAgICAgICAgICA9IHJlcXVpcmUoJ2VzNi1pdGVyYXRvci9mb3Itb2YnKVxuICAsIHRvU3RyaW5nVGFnU3ltYm9sID0gcmVxdWlyZSgnZXM2LXN5bWJvbCcpLnRvU3RyaW5nVGFnXG4gICwgaXNOYXRpdmUgICAgICAgICAgPSByZXF1aXJlKCcuL2lzLW5hdGl2ZS1pbXBsZW1lbnRlZCcpXG5cbiAgLCBpc0FycmF5ID0gQXJyYXkuaXNBcnJheSwgZGVmaW5lUHJvcGVydHkgPSBPYmplY3QuZGVmaW5lUHJvcGVydHlcbiAgLCBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksIGdldFByb3RvdHlwZU9mID0gT2JqZWN0LmdldFByb3RvdHlwZU9mXG4gICwgV2Vha01hcFBvbHk7XG5cbm1vZHVsZS5leHBvcnRzID0gV2Vha01hcFBvbHkgPSBmdW5jdGlvbiAoLyppdGVyYWJsZSovKSB7XG5cdHZhciBpdGVyYWJsZSA9IGFyZ3VtZW50c1swXSwgc2VsZjtcblx0aWYgKCEodGhpcyBpbnN0YW5jZW9mIFdlYWtNYXBQb2x5KSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQ29uc3RydWN0b3IgcmVxdWlyZXMgXFwnbmV3XFwnJyk7XG5cdGlmIChpc05hdGl2ZSAmJiBzZXRQcm90b3R5cGVPZiAmJiAoV2Vha01hcCAhPT0gV2Vha01hcFBvbHkpKSB7XG5cdFx0c2VsZiA9IHNldFByb3RvdHlwZU9mKG5ldyBXZWFrTWFwKCksIGdldFByb3RvdHlwZU9mKHRoaXMpKTtcblx0fSBlbHNlIHtcblx0XHRzZWxmID0gdGhpcztcblx0fVxuXHRpZiAoaXRlcmFibGUgIT0gbnVsbCkge1xuXHRcdGlmICghaXNBcnJheShpdGVyYWJsZSkpIGl0ZXJhYmxlID0gZ2V0SXRlcmF0b3IoaXRlcmFibGUpO1xuXHR9XG5cdGRlZmluZVByb3BlcnR5KHNlbGYsICdfX3dlYWtNYXBEYXRhX18nLCBkKCdjJywgJyR3ZWFrTWFwJCcgKyByYW5kb21VbmlxKCkpKTtcblx0aWYgKCFpdGVyYWJsZSkgcmV0dXJuIHNlbGY7XG5cdGZvck9mKGl0ZXJhYmxlLCBmdW5jdGlvbiAodmFsKSB7XG5cdFx0dmFsdWUodmFsKTtcblx0XHRzZWxmLnNldCh2YWxbMF0sIHZhbFsxXSk7XG5cdH0pO1xuXHRyZXR1cm4gc2VsZjtcbn07XG5cbmlmIChpc05hdGl2ZSkge1xuXHRpZiAoc2V0UHJvdG90eXBlT2YpIHNldFByb3RvdHlwZU9mKFdlYWtNYXBQb2x5LCBXZWFrTWFwKTtcblx0V2Vha01hcFBvbHkucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShXZWFrTWFwLnByb3RvdHlwZSwge1xuXHRcdGNvbnN0cnVjdG9yOiBkKFdlYWtNYXBQb2x5KVxuXHR9KTtcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoV2Vha01hcFBvbHkucHJvdG90eXBlLCB7XG5cdGRlbGV0ZTogZChmdW5jdGlvbiAoa2V5KSB7XG5cdFx0aWYgKGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0KGtleSksIHRoaXMuX193ZWFrTWFwRGF0YV9fKSkge1xuXHRcdFx0ZGVsZXRlIGtleVt0aGlzLl9fd2Vha01hcERhdGFfX107XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9KSxcblx0Z2V0OiBkKGZ1bmN0aW9uIChrZXkpIHtcblx0XHRpZiAoaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3Qoa2V5KSwgdGhpcy5fX3dlYWtNYXBEYXRhX18pKSB7XG5cdFx0XHRyZXR1cm4ga2V5W3RoaXMuX193ZWFrTWFwRGF0YV9fXTtcblx0XHR9XG5cdH0pLFxuXHRoYXM6IGQoZnVuY3Rpb24gKGtleSkge1xuXHRcdHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdChrZXkpLCB0aGlzLl9fd2Vha01hcERhdGFfXyk7XG5cdH0pLFxuXHRzZXQ6IGQoZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcblx0XHRkZWZpbmVQcm9wZXJ0eShvYmplY3Qoa2V5KSwgdGhpcy5fX3dlYWtNYXBEYXRhX18sIGQoJ2MnLCB2YWx1ZSkpO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9KSxcblx0dG9TdHJpbmc6IGQoZnVuY3Rpb24gKCkgeyByZXR1cm4gJ1tvYmplY3QgV2Vha01hcF0nOyB9KVxufSk7XG5kZWZpbmVQcm9wZXJ0eShXZWFrTWFwUG9seS5wcm90b3R5cGUsIHRvU3RyaW5nVGFnU3ltYm9sLCBkKCdjJywgJ1dlYWtNYXAnKSk7XG4iLCIvKlxub2JqZWN0LWFzc2lnblxuKGMpIFNpbmRyZSBTb3JodXNcbkBsaWNlbnNlIE1JVFxuKi9cblxuJ3VzZSBzdHJpY3QnO1xuLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cbnZhciBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzO1xudmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBwcm9wSXNFbnVtZXJhYmxlID0gT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZTtcblxuZnVuY3Rpb24gdG9PYmplY3QodmFsKSB7XG5cdGlmICh2YWwgPT09IG51bGwgfHwgdmFsID09PSB1bmRlZmluZWQpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdPYmplY3QuYXNzaWduIGNhbm5vdCBiZSBjYWxsZWQgd2l0aCBudWxsIG9yIHVuZGVmaW5lZCcpO1xuXHR9XG5cblx0cmV0dXJuIE9iamVjdCh2YWwpO1xufVxuXG5mdW5jdGlvbiBzaG91bGRVc2VOYXRpdmUoKSB7XG5cdHRyeSB7XG5cdFx0aWYgKCFPYmplY3QuYXNzaWduKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8gRGV0ZWN0IGJ1Z2d5IHByb3BlcnR5IGVudW1lcmF0aW9uIG9yZGVyIGluIG9sZGVyIFY4IHZlcnNpb25zLlxuXG5cdFx0Ly8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9NDExOFxuXHRcdHZhciB0ZXN0MSA9IG5ldyBTdHJpbmcoJ2FiYycpOyAgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXctd3JhcHBlcnNcblx0XHR0ZXN0MVs1XSA9ICdkZSc7XG5cdFx0aWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRlc3QxKVswXSA9PT0gJzUnKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MzA1NlxuXHRcdHZhciB0ZXN0MiA9IHt9O1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgMTA7IGkrKykge1xuXHRcdFx0dGVzdDJbJ18nICsgU3RyaW5nLmZyb21DaGFyQ29kZShpKV0gPSBpO1xuXHRcdH1cblx0XHR2YXIgb3JkZXIyID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGVzdDIpLm1hcChmdW5jdGlvbiAobikge1xuXHRcdFx0cmV0dXJuIHRlc3QyW25dO1xuXHRcdH0pO1xuXHRcdGlmIChvcmRlcjIuam9pbignJykgIT09ICcwMTIzNDU2Nzg5Jykge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTMwNTZcblx0XHR2YXIgdGVzdDMgPSB7fTtcblx0XHQnYWJjZGVmZ2hpamtsbW5vcHFyc3QnLnNwbGl0KCcnKS5mb3JFYWNoKGZ1bmN0aW9uIChsZXR0ZXIpIHtcblx0XHRcdHRlc3QzW2xldHRlcl0gPSBsZXR0ZXI7XG5cdFx0fSk7XG5cdFx0aWYgKE9iamVjdC5rZXlzKE9iamVjdC5hc3NpZ24oe30sIHRlc3QzKSkuam9pbignJykgIT09XG5cdFx0XHRcdCdhYmNkZWZnaGlqa2xtbm9wcXJzdCcpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0Ly8gV2UgZG9uJ3QgZXhwZWN0IGFueSBvZiB0aGUgYWJvdmUgdG8gdGhyb3csIGJ1dCBiZXR0ZXIgdG8gYmUgc2FmZS5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzaG91bGRVc2VOYXRpdmUoKSA/IE9iamVjdC5hc3NpZ24gOiBmdW5jdGlvbiAodGFyZ2V0LCBzb3VyY2UpIHtcblx0dmFyIGZyb207XG5cdHZhciB0byA9IHRvT2JqZWN0KHRhcmdldCk7XG5cdHZhciBzeW1ib2xzO1xuXG5cdGZvciAodmFyIHMgPSAxOyBzIDwgYXJndW1lbnRzLmxlbmd0aDsgcysrKSB7XG5cdFx0ZnJvbSA9IE9iamVjdChhcmd1bWVudHNbc10pO1xuXG5cdFx0Zm9yICh2YXIga2V5IGluIGZyb20pIHtcblx0XHRcdGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGZyb20sIGtleSkpIHtcblx0XHRcdFx0dG9ba2V5XSA9IGZyb21ba2V5XTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG5cdFx0XHRzeW1ib2xzID0gZ2V0T3duUHJvcGVydHlTeW1ib2xzKGZyb20pO1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzeW1ib2xzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmIChwcm9wSXNFbnVtZXJhYmxlLmNhbGwoZnJvbSwgc3ltYm9sc1tpXSkpIHtcblx0XHRcdFx0XHR0b1tzeW1ib2xzW2ldXSA9IGZyb21bc3ltYm9sc1tpXV07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gdG87XG59O1xuIiwiLypcclxuIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gfCBEcm9wcyBiYXNlIGZpZWxkXHJcbiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuIHxcclxuIHxcclxuIHxcclxuICovXHJcblxyXG5pbXBvcnQgYXNzaWduIGZyb20gXCJvYmplY3QtYXNzaWduXCI7XHJcbmltcG9ydCAqIGFzIHN5bWJvbHMgZnJvbSBcIi4vc3ltYm9sc1wiO1xyXG5pbXBvcnQge2xpc3Rlbk9uY2V9IGZyb20gXCIuL3V0aWxzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGaWVsZCB7XHJcblxyXG4gICAgLypcclxuICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgSW5pdGlhbGl6ZXJzXHJcbiAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICovXHJcblxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGlucHV0LCBvcHRpb25zID0ge30pIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnRzID0ge307XHJcbiAgICAgICAgdGhpcy5lbGVtZW50cy5pbnB1dCA9IGlucHV0O1xyXG5cclxuICAgICAgICAvLyBJbml0aWFsaXplXHJcbiAgICAgICAgdGhpc1tzeW1ib2xzLmluaXRpYWxpemVPcHRpb25zXShvcHRpb25zKTtcclxuICAgICAgICB0aGlzW3N5bWJvbHMuaW5pdGlhbGl6ZVZpZXddKCk7XHJcbiAgICAgICAgdGhpc1tzeW1ib2xzLmluaXRpYWxpemVTdGF0ZV0oKTtcclxuICAgICAgICB0aGlzW3N5bWJvbHMuaW5pdGlhbGl6ZUV2ZW50c10oKTtcclxuICAgIH1cclxuXHJcbiAgICBbc3ltYm9scy5pbml0aWFsaXplT3B0aW9uc10ob3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IGFzc2lnbih7XHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiB0aGlzLmVsZW1lbnRzLmlucHV0LnBsYWNlaG9sZGVyIHx8IFwiXCIsXHJcblxyXG4gICAgICAgICAgICBnZXRTZWxlY3Rpb24oZmllbGQsIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBnZXRQbGFjZWhvbGRlcihmaWVsZCwgcGxhY2Vob2xkZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwbGFjZWhvbGRlcjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9LCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICBbc3ltYm9scy5pbml0aWFsaXplVmlld10oKSB7XHJcbiAgICAgICAgLy8gSGlkZSBpbnB1dCBlbGVtZW50XHJcbiAgICAgICAgdGhpcy5lbGVtZW50cy5pbnB1dC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gV3JhcHBlclxyXG4gICAgICAgIC8vXHJcblxyXG4gICAgICAgIHRoaXMuZWxlbWVudHMud3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50cy53cmFwcGVyLmNsYXNzTmFtZSA9IFwiZHJvcHMgXCIgKyB0aGlzLmVsZW1lbnRzLmlucHV0LmNsYXNzTmFtZTtcclxuXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyBIZWFkXHJcbiAgICAgICAgLy9cclxuXHJcbiAgICAgICAgdGhpcy5lbGVtZW50cy5oZWFkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLmVsZW1lbnRzLmhlYWQuY2xhc3NOYW1lID0gXCJkcm9wcy1oZWFkXCI7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50cy53cmFwcGVyLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudHMuaGVhZCk7XHJcblxyXG4gICAgICAgIHRoaXMuZWxlbWVudHMucGxhY2Vob2xkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudHMucGxhY2Vob2xkZXIuY2xhc3NOYW1lID0gXCJkcm9wcy1wbGFjZWhvbGRlclwiO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudHMucGxhY2Vob2xkZXIuaW5uZXJIVE1MID0gdGhpcy5vcHRpb25zLmdldFBsYWNlaG9sZGVyKHRoaXMsIHRoaXMub3B0aW9ucy5wbGFjZWhvbGRlcik7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50cy5oZWFkLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudHMucGxhY2Vob2xkZXIpO1xyXG5cclxuICAgICAgICB0aGlzLmVsZW1lbnRzLnNlbGVjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50cy5zZWxlY3Rpb24uY2xhc3NOYW1lID0gXCJkcm9wcy1zZWxlY3Rpb25cIjtcclxuICAgICAgICB0aGlzLmVsZW1lbnRzLmhlYWQuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50cy5zZWxlY3Rpb24pO1xyXG5cclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIEJvZHlcclxuICAgICAgICAvL1xyXG5cclxuICAgICAgICB0aGlzLmVsZW1lbnRzLmJvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudHMuYm9keS5jbGFzc05hbWUgPSBcImRyb3BzLWJvZHlcIjtcclxuICAgICAgICB0aGlzLmVsZW1lbnRzLndyYXBwZXIuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50cy5ib2R5KTtcclxuXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyBQdXNoIGlucHV0IHZhbHVlcyB0byB0aGUgdmlldyBcclxuICAgICAgICAvL1xyXG5cclxuICAgICAgICBpZiAodGhpcy5lbGVtZW50cy5pbnB1dC5kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICB0aGlzLmRpc2FibGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFwcGVuZCB2aWV3XHJcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudHMuaW5wdXQubmV4dFNpYmxpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50cy5pbnB1dC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLmVsZW1lbnRzLndyYXBwZXIsIHRoaXMuZWxlbWVudHMuaW5wdXQubmV4dFNpYmxpbmcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50cy5pbnB1dC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudHMud3JhcHBlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIFtzeW1ib2xzLmluaXRpYWxpemVTdGF0ZV0oKSB7XHJcbiAgICAgICAgdGhpc1tzeW1ib2xzLnNldFNlbGVjdGlvbl0odGhpcy5nZXQoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgW3N5bWJvbHMuaW5pdGlhbGl6ZUV2ZW50c10oKSB7XHJcblxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gQ2xpY2sgb24gcGxhY2Vob2xkZXJcclxuICAgICAgICAvL1xyXG5cclxuICAgICAgICB0aGlzLmVsZW1lbnRzLmhlYWQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGUoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyBDbGljayBvdXRzaWRlIChvbiB3aW5kb3cpXHJcbiAgICAgICAgLy9cclxuXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoKHRoaXMuZWxlbWVudHMud3JhcHBlciAhPSBlLnRhcmdldCkgJiYgIXRoaXMuZWxlbWVudHMud3JhcHBlci5jb250YWlucyhlLnRhcmdldCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICAvKlxyXG4gICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICBPcGVuL0Nsb3NlZCBzdGF0ZVxyXG4gICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAqL1xyXG5cclxuICAgIGdldCBvcGVuZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudHMud3JhcHBlci5jbGFzc05hbWUuaW5kZXhPZihcImRyb3BzLW9wZW5cIikgPiAtMTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgY2xvc2VkKCkge1xyXG4gICAgICAgIHJldHVybiAhdGhpcy5vcGVuZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbihzaWxlbnQgPSBmYWxzZSkge1xyXG4gICAgICAgIGlmICh0aGlzLm9wZW5lZCB8fCB0aGlzLmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5lbGVtZW50cy53cmFwcGVyLmNsYXNzTmFtZSArPSBcIiBkcm9wcy1vcGVuXCI7XHJcblxyXG4gICAgICAgIC8vIFRyaWdnZXJcclxuICAgICAgICBpZiAoc2lsZW50ID09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcihcIm9wZW5cIiwgdGhpcyk7XHJcblxyXG4gICAgICAgICAgICAvLyBUcmlnZ2VyIG9wZW5lZCBvbiB0cmFuc2l0aW9uIGVuZFxyXG4gICAgICAgICAgICBsaXN0ZW5PbmNlKHRoaXMuZWxlbWVudHMuYm9keSwgXCJ0cmFuc2l0aW9uZW5kXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcihcIm9wZW5lZFwiLCB0aGlzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZShzaWxlbnQgPSBmYWxzZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCB8fCB0aGlzLmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGNsYXNzTGlzdCA9IHRoaXMuZWxlbWVudHMud3JhcHBlci5jbGFzc05hbWUuc3BsaXQoXCIgXCIpLFxyXG4gICAgICAgICAgICBjbGFzc0luZGV4ID0gY2xhc3NMaXN0LmluZGV4T2YoXCJkcm9wcy1vcGVuXCIpO1xyXG5cclxuICAgICAgICBjbGFzc0xpc3Quc3BsaWNlKGNsYXNzSW5kZXgsIDEpO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudHMud3JhcHBlci5jbGFzc05hbWUgPSBjbGFzc0xpc3Quam9pbihcIiBcIik7XHJcblxyXG4gICAgICAgIC8vIFRyaWdnZXJcclxuICAgICAgICBpZiAoc2lsZW50ID09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcihcImNsb3NlXCIsIHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgLy8gVHJpZ2dlciBjbG9zZWQgb24gdHJhbnNpdGlvbiBlbmRcclxuICAgICAgICAgICAgbGlzdGVuT25jZSh0aGlzLmVsZW1lbnRzLmJvZHksIFwidHJhbnNpdGlvbmVuZFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoXCJjbG9zZWRcIik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgdG9nZ2xlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9wZW5lZCA/IHRoaXMuY2xvc2UoKSA6IHRoaXMub3BlbigpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qXHJcbiAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgIFNlbGVjdGlvbiBzdGF0ZVxyXG4gICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAqL1xyXG5cclxuICAgIFtzeW1ib2xzLnNldFNlbGVjdGlvbl0odmFsdWUpIHtcclxuICAgICAgICAvLyBDbGVhclxyXG4gICAgICAgIGlmICgodmFsdWUgPT0gbnVsbCkgfHwgKHZhbHVlLmxlbmd0aCA9PT0gMCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXNbc3ltYm9scy5jbGVhclNlbGVjdGlvbl0oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFNldFxyXG4gICAgICAgIHRoaXMuZWxlbWVudHMuc2VsZWN0aW9uLmlubmVySFRNTCA9IHRoaXMub3B0aW9ucy5nZXRTZWxlY3Rpb24odGhpcywgdmFsdWUpO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudHMud3JhcHBlci5jbGFzc05hbWUgKz0gXCIgZHJvcHMtaGFzLXNlbGVjdGlvblwiO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBbc3ltYm9scy5jbGVhclNlbGVjdGlvbl0oKSB7XHJcbiAgICAgICAgdmFyIGNsYXNzTGlzdCA9IHRoaXMuZWxlbWVudHMud3JhcHBlci5jbGFzc05hbWUuc3BsaXQoXCIgXCIpLFxyXG4gICAgICAgICAgICBjbGFzc0luZGV4ID0gY2xhc3NMaXN0LmluZGV4T2YoXCJkcm9wcy1oYXMtc2VsZWN0aW9uXCIpO1xyXG5cclxuICAgICAgICBpZiAoY2xhc3NJbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgIGNsYXNzTGlzdC5zcGxpY2UoY2xhc3NJbmRleCwgMSk7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHMud3JhcHBlci5jbGFzc05hbWUgPSBjbGFzc0xpc3Quam9pbihcIiBcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKlxyXG4gICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICBFbmFibGUvRGlzYWJsZWQgc3RhdGVcclxuICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgKi9cclxuXHJcbiAgICBnZXQgZGlzYWJsZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudHMud3JhcHBlci5jbGFzc05hbWUuaW5kZXhPZihcImRyb3BzLWRpc2FibGVkXCIpID4gLTE7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGVuYWJsZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuICF0aGlzLmRpc2FibGVkO1xyXG4gICAgfVxyXG5cclxuICAgIGVuYWJsZShzaWxlbnQgPSBmYWxzZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmVuYWJsZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgY2xhc3NMaXN0ID0gdGhpcy5lbGVtZW50cy53cmFwcGVyLmNsYXNzTmFtZS5zcGxpdChcIiBcIiksXHJcbiAgICAgICAgICAgIGRpc2FibGVkSW5kZXggPSBjbGFzc0xpc3QuaW5kZXhPZihcImRyb3BzLWRpc2FibGVkXCIpO1xyXG5cclxuICAgICAgICBjbGFzc0xpc3Quc3BsaWNlKGRpc2FibGVkSW5kZXgsIDEpO1xyXG5cclxuICAgICAgICB0aGlzLmVsZW1lbnRzLndyYXBwZXIuY2xhc3NOYW1lID0gY2xhc3NMaXN0LmpvaW4oXCIgXCIpO1xyXG5cclxuICAgICAgICAvLyBUcmlnZ2VyXHJcbiAgICAgICAgaWYgKHNpbGVudCA9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoXCJlbmFibGVcIiwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBkaXNhYmxlKHNpbGVudCA9IGZhbHNlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmVsZW1lbnRzLndyYXBwZXIuY2xhc3NOYW1lICs9IFwiIGRyb3BzLWRpc2FibGVkXCI7XHJcblxyXG4gICAgICAgIGlmIChzaWxlbnQgPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKFwiZGlzYWJsZVwiLCB0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qXHJcbiAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgIFZhbHVlIG11dGF0b3JzXHJcbiAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICovXHJcblxyXG4gICAgW3N5bWJvbHMuZ2V0VmFsdWVdKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzLmlucHV0LnZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIFtzeW1ib2xzLnNldFZhbHVlXSh2YWx1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmdldCgpID09PSB2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmVsZW1lbnRzLmlucHV0LnZhbHVlID0gdmFsdWUgfHwgXCJcIjtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXNbc3ltYm9scy5nZXRWYWx1ZV0oKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQodmFsdWUsIHNpbGVudCA9IGZhbHNlKSB7XHJcbiAgICAgICAgaWYgKHRoaXNbc3ltYm9scy5zZXRWYWx1ZV0odmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHRoaXNbc3ltYm9scy5zZXRTZWxlY3Rpb25dKHRoaXMuZ2V0KCkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFzaWxlbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcihcImNoYW5nZVwiLCB0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLypcclxuICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgRXZlbnRzXHJcbiAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICovXHJcblxyXG4gICAgb24oZXZlbnROYW1lLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudHMuaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGNhbGxiYWNrKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBvZmYoZXZlbnROYW1lLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudHMuaW5wdXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGNhbGxiYWNrKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICB0cmlnZ2VyKGV2ZW50TmFtZSwgZGF0YSA9IHt9KSB7XHJcbiAgICAgICAgdmFyIGV2ZW50ID0gbmV3IEV2ZW50KGV2ZW50TmFtZSwgZGF0YSk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50cy5pbnB1dC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbn0iLCIvKlxyXG4gfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiB8IFNlbGVjdCBmaWVsZFxyXG4gfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiB8XHJcbiB8XHJcbiB8XHJcbiAqL1xyXG5cclxuaW1wb3J0IGFzc2lnbiBmcm9tIFwib2JqZWN0LWFzc2lnblwiO1xyXG5pbXBvcnQgRmllbGQgZnJvbSBcIi4vRmllbGRcIjtcclxuaW1wb3J0ICogYXMgc3ltYm9scyBmcm9tIFwiLi9zeW1ib2xzXCI7XHJcbmltcG9ydCB7ZGVib3VuY2V9IGZyb20gXCIuL3V0aWxzXCI7XHJcbmltcG9ydCBTeW1ib2wgZnJvbSBcImVzNi1zeW1ib2xcIjtcclxuXHJcbi8vIExvY2FsIHN5bWJvbHNcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlbGVjdEZpZWxkIGV4dGVuZHMgRmllbGQge1xyXG5cclxuICAgIC8qXHJcbiAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgIEluaXRpYWxpemVyc1xyXG4gICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAqL1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGlucHV0LCBvcHRpb25zID0ge30pIHtcclxuICAgICAgICBpZiAoaW5wdXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gXCJzZWxlY3RcIikge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc2VsZWN0IGZpZWxkIGNhbiBvbmx5IGluc3RhbnRpYXRlIHNlbGVjdCBlbGVtZW50cyFcIik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN1cGVyKGlucHV0LCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICBbc3ltYm9scy5pbml0aWFsaXplT3B0aW9uc10ob3B0aW9ucykge1xyXG4gICAgICAgIHN1cGVyW3N5bWJvbHMuaW5pdGlhbGl6ZU9wdGlvbnNdKG9wdGlvbnMpO1xyXG5cclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBhc3NpZ24odGhpcy5vcHRpb25zLCB7XHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiB0aGlzLmVsZW1lbnRzLmlucHV0LmRhdGFzZXQucGxhY2Vob2xkZXIgfHwgXCJcIixcclxuXHJcbiAgICAgICAgICAgIC8vIFF1ZXJ5XHJcbiAgICAgICAgICAgIHF1ZXJ5T3B0aW9uczogdHJ1ZSxcclxuICAgICAgICAgICAgcXVlcnlQbGFjZWhvbGRlcjogXCJGaWx0ZXIgb3B0aW9ucy4uLlwiLFxyXG4gICAgICAgICAgICBxdWVyeURlYm91bmNlOiAyNTAsXHJcbiAgICAgICAgICAgIHF1ZXJ5KGZpZWxkLCBvcHRpb25zLCBxdWVyeSkge1xyXG4gICAgICAgICAgICAgICAgLy8gRmlsdGVyIGJ5IGxhYmVsXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLmZvckVhY2goKG9wdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi5zdHlsZS5kaXNwbGF5ID0gb3B0aW9uLmRhdGFzZXQubGFiZWwuaW5kZXhPZihxdWVyeSkgPT09IDAgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImJsb2NrXCIgOiBcIm5vbmVcIjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLy8gU2VsZWN0aW9uXHJcbiAgICAgICAgICAgIGdldFNlbGVjdGlvbihmaWVsZCwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gZmllbGQuZ2V0T3B0aW9uRGF0YSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YSA/IGRhdGEubGFiZWwgOiBcIlwiO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLy8gT3B0aW9uXHJcbiAgICAgICAgICAgIGdldE9wdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5sYWJlbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9LCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICBbc3ltYm9scy5pbml0aWFsaXplVmlld10oKSB7XHJcbiAgICAgICAgc3VwZXJbc3ltYm9scy5pbml0aWFsaXplVmlld10oKTtcclxuXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyBPdmVycmlkZXNcclxuICAgICAgICAvL1xyXG5cclxuICAgICAgICB0aGlzLmVsZW1lbnRzLndyYXBwZXIuY2xhc3NOYW1lICs9IFwiIGRyb3BzLXNlbGVjdFwiO1xyXG5cclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIE9wdGlvbnMgcXVlcnlcclxuICAgICAgICAvL1xyXG5cclxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnF1ZXJ5T3B0aW9ucykge1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzLnF1ZXJ5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50cy5xdWVyeS5jbGFzc05hbWUgPSBcImRyb3BzLXF1ZXJ5XCI7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHMuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnRzLnF1ZXJ5KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHMucXVlcnlJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50cy5xdWVyeUlucHV0LnR5cGUgPSBcInRleHRcIjtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50cy5xdWVyeUlucHV0LnBsYWNlaG9sZGVyID0gdGhpcy5vcHRpb25zLnF1ZXJ5UGxhY2Vob2xkZXI7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHMucXVlcnkuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50cy5xdWVyeUlucHV0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gT3B0aW9uc1xyXG4gICAgICAgIC8vXHJcblxyXG4gICAgICAgIHRoaXMuZWxlbWVudHMub3B0aW9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50cy5vcHRpb25zLmNsYXNzTmFtZSA9IFwiZHJvcHMtb3B0aW9uc1wiO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudHMuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnRzLm9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIFtzeW1ib2xzLmluaXRpYWxpemVTdGF0ZV0oKSB7XHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBbXTtcclxuXHJcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5lbGVtZW50cy5pbnB1dC5vcHRpb25zKS5mb3JFYWNoKChvcHRpb24pID0+IHtcclxuICAgICAgICAgICAgb3B0aW9ucy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHZhbHVlOiBvcHRpb24udmFsdWUsXHJcbiAgICAgICAgICAgICAgICBsYWJlbDogb3B0aW9uLmlubmVyVGV4dCxcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBvcHRpb24uc2VsZWN0ZWRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0T3B0aW9ucyhvcHRpb25zLCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBbc3ltYm9scy5pbml0aWFsaXplRXZlbnRzXSgpIHtcclxuICAgICAgICBzdXBlcltzeW1ib2xzLmluaXRpYWxpemVFdmVudHNdKCk7XHJcblxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gT3B0aW9ucyBjbGljayBldmVudFxyXG4gICAgICAgIC8vXHJcblxyXG4gICAgICAgIHRoaXMuZWxlbWVudHMub3B0aW9ucy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKFwiZHJvcHMtb3B0aW9uXCIpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0KGUudGFyZ2V0LmRhdGFzZXQudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gUXVlcnkgaW5wdXRcclxuICAgICAgICAvL1xyXG5cclxuICAgICAgICBpZiAodGhpcy5lbGVtZW50cy5xdWVyeUlucHV0KSB7XHJcblxyXG4gICAgICAgICAgICAvLyBGaWx0ZXIgb24gaW5wdXRcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50cy5xdWVyeUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBkZWJvdW5jZSh0aGlzLm9wdGlvbnMucXVlcnlEZWJvdW5jZSwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLnF1ZXJ5KFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50cy5vcHRpb25zLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZHJvcHMtb3B0aW9uXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudHMucXVlcnlJbnB1dC52YWx1ZVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAgICAgLy8gRm9jdXMgb24gb3BlblxyXG4gICAgICAgICAgICB0aGlzLm9uKFwib3BlbmVkXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudHMucXVlcnlJbnB1dC5mb2N1cygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLypcclxuICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgT3B0aW9uIG1hbmFnZW1lbnRcclxuICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgKi9cclxuXHJcbiAgICBnZXRPcHRpb25EYXRhKHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIG9wdGlvbiA9IHRoaXMuZWxlbWVudHMub3B0aW9ucy5xdWVyeVNlbGVjdG9yKGAuZHJvcHMtb3B0aW9uW2RhdGEtdmFsdWU9JyR7dmFsdWV9J11gKTtcclxuICAgICAgICByZXR1cm4gb3B0aW9uID8gb3B0aW9uLmRhdGFzZXQgOiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHNldE9wdGlvbnMob3B0aW9ucywgc2lsZW50ID0gZmFsc2UpIHtcclxuICAgICAgICAvLyBDbGVhciBzZWxlY3Rpb25cclxuICAgICAgICB0aGlzLnNldChudWxsLCB0cnVlKTtcclxuXHJcbiAgICAgICAgLy8gQ2xlYXIgY3VycmVudCBvcHRpb25zXHJcbiAgICAgICAgdGhpcy5lbGVtZW50cy5pbnB1dC5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudHMub3B0aW9ucy5pbm5lckhUTUwgPSBcIlwiO1xyXG5cclxuICAgICAgICAvLyBQdXNoIHBsYWNlaG9sZGVyIGlucHV0IG9wdGlvblxyXG4gICAgICAgIHZhciBwbGFjZWhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XHJcbiAgICAgICAgcGxhY2Vob2xkZXIudmFsdWUgPSBcIlwiO1xyXG4gICAgICAgIHBsYWNlaG9sZGVyLmlubmVyVGV4dCA9IHRoaXMub3B0aW9ucy5wbGFjZWhvbGRlcjtcclxuICAgICAgICB0aGlzLmVsZW1lbnRzLmlucHV0LmFwcGVuZENoaWxkKHBsYWNlaG9sZGVyKTtcclxuXHJcbiAgICAgICAgLy8gQnVpbGQgb3B0aW9uc1xyXG4gICAgICAgIHZhciBzZWxlY3Rpb247XHJcblxyXG4gICAgICAgIG9wdGlvbnMuZm9yRWFjaCgob3B0aW9uRGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoKHR5cGVvZiBvcHRpb25EYXRhLnZhbHVlICE9PSBcInN0cmluZ1wiKSB8fCAob3B0aW9uRGF0YS52YWx1ZS5sZW5ndGggPT09IDApKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghb3B0aW9uRGF0YS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uRGF0YS5sYWJlbCA9IG9wdGlvbkRhdGEudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBpbnB1dCBvcHRpb25cclxuICAgICAgICAgICAgdmFyIGlucHV0T3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgICAgICAgICAgaW5wdXRPcHRpb24udmFsdWUgPSBvcHRpb25EYXRhLnZhbHVlO1xyXG4gICAgICAgICAgICBpbnB1dE9wdGlvbi5pbm5lclRleHQgPSBvcHRpb25EYXRhLmxhYmVsO1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzLmlucHV0LmFwcGVuZENoaWxkKGlucHV0T3B0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBvcHRpb25cclxuICAgICAgICAgICAgdmFyIG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIG9wdGlvbi5jbGFzc05hbWUgPSBcImRyb3BzLW9wdGlvblwiO1xyXG4gICAgICAgICAgICBvcHRpb24uaW5uZXJIVE1MID0gdGhpcy5vcHRpb25zLmdldE9wdGlvbihvcHRpb25EYXRhKTtcclxuXHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKG9wdGlvbkRhdGEpLmZvckVhY2goKGtleSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uLmRhdGFzZXRba2V5XSA9IG9wdGlvbkRhdGFba2V5XTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzLm9wdGlvbnMuYXBwZW5kQ2hpbGQob3B0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFNlbGVjdCBpZiBzZWxlY3RlZFxyXG4gICAgICAgICAgICBpZiAob3B0aW9uRGF0YS5zZWxlY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uID0gb3B0aW9uRGF0YS52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBTZXQgc2VsZWN0aW9uXHJcbiAgICAgICAgdGhpcy5zZXQoc2VsZWN0aW9uLCBzaWxlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qXHJcbiAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgIFZhbHVlXHJcbiAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICovXHJcblxyXG4gICAgW3N5bWJvbHMuc2V0VmFsdWVdKHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZ2V0KCkgPT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEdldCBvcHRpb25cclxuICAgICAgICB2YXIgb3B0aW9uO1xyXG5cclxuICAgICAgICBpZiAoKHZhbHVlICE9IG51bGwpICYmICh2YWx1ZS5sZW5ndGggPiAwKSkge1xyXG4gICAgICAgICAgICBvcHRpb24gPSB0aGlzLmVsZW1lbnRzLm9wdGlvbnMucXVlcnlTZWxlY3RvcihgLmRyb3BzLW9wdGlvbltkYXRhLXZhbHVlPScke3ZhbHVlfSddYCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIW9wdGlvbikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDbGVhciBjdXJyZW50IHNlbGVjdGlvblxyXG4gICAgICAgIHZhciBjdXJyZW50ID0gdGhpcy5lbGVtZW50cy5vcHRpb25zLnF1ZXJ5U2VsZWN0b3IoXCIuZHJvcHMtb3B0aW9uLmRyb3BzLXNlbGVjdGVkXCIpO1xyXG5cclxuICAgICAgICBpZiAoY3VycmVudCkge1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudENsYXNzZXMgPSBjdXJyZW50LmNsYXNzTmFtZS5zcGxpdChcIiBcIiksXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEluZGV4ID0gY3VycmVudENsYXNzZXMuaW5kZXhPZihcImRyb3BzLXNlbGVjdGVkXCIpO1xyXG5cclxuICAgICAgICAgICAgY3VycmVudENsYXNzZXMuc3BsaWNlKHNlbGVjdGVkSW5kZXgsIDEpO1xyXG4gICAgICAgICAgICBjdXJyZW50LmNsYXNzTmFtZSA9IGN1cnJlbnRDbGFzc2VzLmpvaW4oXCIgXCIpO1xyXG4gICAgICAgICAgICBjdXJyZW50LmRhdGFzZXQuc2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENsZWFyIGlucHV0IHNlbGVjdGlvblxyXG4gICAgICAgIHRoaXMuZWxlbWVudHMuaW5wdXQudmFsdWUgPSBcIlwiO1xyXG5cclxuICAgICAgICAvLyBTZXQgbmV3IHNlbGVjdGlvblxyXG4gICAgICAgIGlmIChvcHRpb24pIHtcclxuICAgICAgICAgICAgb3B0aW9uLmNsYXNzTmFtZSArPSBcIiBkcm9wcy1zZWxlY3RlZFwiO1xyXG4gICAgICAgICAgICBvcHRpb24uZGF0YXNldC5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHMuaW5wdXQudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxufSIsIi8qXHJcbiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuIHwgRHJvcHNcclxuIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gfFxyXG4gfFxyXG4gfFxyXG4gKi9cclxuXHJcbmltcG9ydCBGaWVsZCBmcm9tIFwiLi9GaWVsZFwiO1xyXG5pbXBvcnQgU2VsZWN0IGZyb20gXCIuL1NlbGVjdFwiO1xyXG5pbXBvcnQge2NyZWF0ZSwgcmVnaXN0ZXIsIGluc3RhbmNlfSBmcm9tIFwiLi9tYW5hZ2VyXCI7XHJcbmltcG9ydCBzeW1ib2xzIGZyb20gXCIuL3N5bWJvbHNcIjtcclxuXHJcbihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xyXG4gICAgdmFyIGRyb3BzID0gZmFjdG9yeSgpO1xyXG5cclxuICAgIC8vIENvbW1vbiBKUyAoc2luY2UgdGhpcyBpcyBicm93c2VyaWZ5IGl0J3MgZmFpciB0byBleHBvcnQgYWxsIHRoZSB0aW1lKVxyXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBkcm9wcztcclxuXHJcbiAgICAvLyBBTURcclxuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xyXG4gICAgICAgIGRlZmluZSgoKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBkcm9wcztcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBXaW5kb3dcclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJvb3QuZHJvcHMgPSBkcm9wcztcclxuICAgIH1cclxuXHJcbn0pKHdpbmRvdyB8fCBnbG9iYWwsIGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAvLyBQdXNoIGJ1bmRsZWQgZmllbGRzXHJcbiAgICByZWdpc3RlcihcInNlbGVjdFwiLCBTZWxlY3QpO1xyXG5cclxuICAgIC8vIEV4cG9ydFxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBGaWVsZDogRmllbGQsXHJcbiAgICAgICAgU2VsZWN0OiBTZWxlY3QsXHJcbiAgICAgICAgY3JlYXRlOiBjcmVhdGUsXHJcbiAgICAgICAgcmVnaXN0ZXI6IHJlZ2lzdGVyLFxyXG4gICAgICAgIGluc3RhbmNlOiBpbnN0YW5jZSxcclxuICAgICAgICBzeW1ib2xzOiBzeW1ib2xzXHJcbiAgICB9O1xyXG59KTsiLCIvKlxyXG4gfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiB8IEZpZWxkIG1hbmFnZXIgKGNyZWF0ZSBhbmQgcmV0cmlldmUgaW5zdGFuY2VzKVxyXG4gfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiB8XHJcbiB8XHJcbiB8XHJcbiAqL1xyXG5cclxuaW1wb3J0IFdlYWtNYXAgZnJvbSBcImVzNi13ZWFrLW1hcFwiO1xyXG5cclxuLy9cclxuLy8gTG9jYWxzXHJcbi8vXHJcblxyXG52YXIgaW5zdGFuY2VzID0gbmV3IFdlYWtNYXAoKSxcclxuICAgIHR5cGVzID0ge307XHJcblxyXG4vL1xyXG4vLyBSZWdpc3RlciBhIG5ldyB0eXBlIG9mIGZpZWxkXHJcbi8vXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXIodHlwZU5hbWUsIHR5cGVDbGFzcykge1xyXG4gICAgdHlwZXNbdHlwZU5hbWVdID0gdHlwZUNsYXNzO1xyXG59XHJcblxyXG4vL1xyXG4vLyBDcmVhdGVzIGEgbmV3IGZpZWxkIGluc3RhbmNlXHJcbi8vXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlKHR5cGUsIGVsZW1lbnQsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgLy8gQ2hlY2sgaWYgYWxyZWFkeSBhbiBpbnN0YW5jZVxyXG4gICAgaWYgKGluc3RhbmNlcy5nZXQoZWxlbWVudCkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBIGZpZWxkIGluc3RhbmNlIGFscmVhZHkgZXhpc3RzIG9uIHRoZSBlbGVtZW50IVwiKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgY2xhc3NcclxuICAgIGlmICghdHlwZXNbdHlwZV0pIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgdHlwZSBjb3VsZCBub3QgYmUgZm91bmQhXCIpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgaW5zdGFuY2UgPSBuZXcgdHlwZXNbdHlwZV0oZWxlbWVudCwgb3B0aW9ucyk7XHJcbiAgICBpbnN0YW5jZXMuc2V0KGVsZW1lbnQsIGluc3RhbmNlKTtcclxuXHJcbiAgICByZXR1cm4gaW5zdGFuY2U7XHJcbn1cclxuXHJcbi8vXHJcbi8vIFJldHJpZXZlcyBhbiBpbnN0YW5jZSBmb3IgYSBzcGVjaWZpYyBlbGVtZW50XHJcbi8vXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFuY2UoZWxlbWVudCkge1xyXG4gICAgcmV0dXJuIGluc3RhbmNlcy5nZXQoZWxlbWVudCk7XHJcbn1cclxuIiwiLypcclxuIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gfCBTeW1ib2xzIHVzZWQgaW4gdGhlIGZpZWxkIGNsYXNzXHJcbiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuIHxcclxuIHxcclxuIHxcclxuICovXHJcblxyXG5pbXBvcnQgU3ltYm9sIGZyb20gXCJlczYtc3ltYm9sXCI7XHJcblxyXG5leHBvcnQgY29uc3QgaW5pdGlhbGl6ZU9wdGlvbnMgPSBTeW1ib2woXCJpbml0aWFsaXplT3B0aW9uc1wiKTtcclxuZXhwb3J0IGNvbnN0IGluaXRpYWxpemVWaWV3ID0gU3ltYm9sKFwiaW5pdGlhbGl6ZVZpZXdcIik7XHJcbmV4cG9ydCBjb25zdCBpbml0aWFsaXplRXZlbnRzID0gU3ltYm9sKFwiaW5pdGlhbGl6ZUV2ZW50c1wiKTtcclxuZXhwb3J0IGNvbnN0IGluaXRpYWxpemVTdGF0ZSA9IFN5bWJvbChcImluaXRpYWxpemVTdGF0ZVwiKTtcclxuZXhwb3J0IGNvbnN0IHNldFNlbGVjdGlvbiA9IFN5bWJvbChcInNldFNlbGVjdGlvblwiKTtcclxuZXhwb3J0IGNvbnN0IGNsZWFyU2VsZWN0aW9uID0gU3ltYm9sKFwiY2xlYXJTZWxlY3Rpb25cIik7XHJcbmV4cG9ydCBjb25zdCBzZXRWYWx1ZSA9IFN5bWJvbChcInNldFZhbHVlXCIpO1xyXG5leHBvcnQgY29uc3QgZ2V0VmFsdWUgPSBTeW1ib2woXCJnZXRWYWx1ZVwiKTsiLCIvKipcclxuICogRGVib3VuY2VzIGEgZnVuY3Rpb25cclxuICpcclxuICogQHBhcmFtIHtpbnR9IHRpbWVvdXRcclxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcclxuICogQHJldHVybnMge0Z1bmN0aW9ufVxyXG4gKi9cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkZWJvdW5jZSh0aW1lb3V0LCBjYWxsYmFjaykge1xyXG4gICAgdmFyIHRpbWVyO1xyXG5cclxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XHJcblxyXG4gICAgICAgIGlmICh0aW1lcikge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xyXG4gICAgICAgICAgICB0aW1lciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aW1lciA9IG51bGw7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG5cclxuICAgICAgICB9LCB0aW1lb3V0KTtcclxuICAgIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBZGRzIGEgbGlzdGVuZXIgdGhhdCB0cmlnZ2VycyBvbmNlIG9uIGEgc3BlY2lmaWMgZWxlbWVudFxyXG4gKlxyXG4gKiBAcGFyYW0gZWxlbWVudFxyXG4gKiBAcGFyYW0gZXZlbnROYW1lXHJcbiAqIEBwYXJhbSBjYWxsYmFja1xyXG4gKi9cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW5PbmNlKGVsZW1lbnQsIGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcclxuICAgIGZ1bmN0aW9uIGNhbGxiYWNrV3JhcHBlcigpIHtcclxuICAgICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBjYWxsYmFja1dyYXBwZXIpO1xyXG4gICAgICAgIGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICB9XHJcblxyXG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgY2FsbGJhY2tXcmFwcGVyKTtcclxufSJdfQ=="}